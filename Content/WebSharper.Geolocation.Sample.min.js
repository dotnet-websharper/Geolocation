(function(n){"use strict";Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});n.WebSharper={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i of Object.getOwnPropertyNames(n))t[i]=n[i];return Object.setPrototypeOf(t,Object.getPrototypeOf(n)),t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},PrintObject:function(n){var t="{ ",i=!0;for(var r of Object.getOwnPropertyNames(n))i?i=!1:t+=", ",t+=r+" = "+n[r];return t+(i?"}":" }")},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return WebSharper.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:WebSharper.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},MarkResizable:function(n){return Object.defineProperty(n,"resizable",{enumerable:!1,writable:!1,configurable:!1,value:!0}),n},MarkReadOnly:function(n){return Object.defineProperty(n,"readonly",{enumerable:!1,writable:!1,configurable:!1,value:!0}),n},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};n.WebSharper.Runtime.OnLoad(function(){n.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});n.ignore=function(){};n.id=function(n){return n};n.fst=function(n){return n[0]};n.snd=function(n){return n[1]};n.trd=function(n){return n[2]};n.console||(n.console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore})})(self);
/* https://github.com/jonathantneal/closest */
(function(w,p){p=w.Element.prototype
if(!p.matches){p.matches=p.msMatchesSelector||function(s){var m=(this.document||this.ownerDocument).querySelectorAll(s);for(var i=0;m[i]&&m[i]!==e;++i);return!!m[i]}}
if(!p.closest){p.closest=function(s){var e=this;while(e&&e.nodeType==1){if(e.matches(s))return e;e=e.parentNode}return null}}})(self);
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8;b=a.WebSharper=a.WebSharper||{};c=b.Geolocation=b.Geolocation||{};d=c.Sample=c.Sample||{};e=d.Client=d.Client||{};f=b.Operators=b.Operators||{};g=b.Obj=b.Obj||{};h=b.UI=b.UI||{};i=h.Templating=h.Templating||{};j=i.Runtime=i.Runtime||{};k=j.Server=j.Server||{};l=k.TemplateInstance=k.TemplateInstance||{};m=b.Arrays=b.Arrays||{};n=k.ProviderBuilder=k.ProviderBuilder||{};o=h.Var=h.Var||{};p=k.Handler=k.Handler||{};q=b.Unchecked=b.Unchecked||{};r=a.WebSharper$Geolocation$Sample_Templates=a.WebSharper$Geolocation$Sample_Templates||{};s=h.TemplateHole=h.TemplateHole||{};t=h.TemplateHoleModule=h.TemplateHoleModule||{};u=t.TextView=t.TextView||{};v=a.System=a.System||{};w=v.Guid=v.Guid||{};x=a.StartupCode$WebSharper_Geolocation_Sample$Client=a.StartupCode$WebSharper_Geolocation_Sample$Client||{};y=t.EventQ=t.EventQ||{};z=h.Client=h.Client||{};A=z.Templates=z.Templates||{};B=h.Doc=h.Doc||{};C=b.JavaScript=b.JavaScript||{};D=C.Pervasives=C.Pervasives||{};E=b.Collections=b.Collections||{};F=E.Dictionary=E.Dictionary||{};G=a.EventTarget;H=a.Node;I=h.Var$1=h.Var$1||{};J=a.WindowOrWorkerGlobalScope;K=C.JS=C.JS||{};L=a.Object;M=E.HashSet=E.HashSet||{};N=b.Seq=b.Seq||{};O=k.TemplateInitializer=k.TemplateInitializer||{};P=t.VarStr=t.VarStr||{};Q=t.VarFloatUnchecked=t.VarFloatUnchecked||{};R=t.VarBool=t.VarBool||{};S=t.VarDateTime=t.VarDateTime||{};T=t.VarFile=t.VarFile||{};U=t.VarDomElement=t.VarDomElement||{};V=h.View=h.View||{};W=b.Numeric=b.Numeric||{};X=h.ConcreteVar=h.ConcreteVar||{};Y=h.Snap=h.Snap||{};Z=E.DictionaryUtil=E.DictionaryUtil||{};_0=b.Enumerator=b.Enumerator||{};_1=_0.T=_0.T||{};_2=a.StartupCode$WebSharper_UI$Templates=a.StartupCode$WebSharper_UI$Templates||{};_3=h.Docs=h.Docs||{};_4=h.DocElemNode=h.DocElemNode||{};_5=a.CharacterData;_6=h.Abbrev=h.Abbrev||{};_7=_6.Fresh=_6.Fresh||{};_8=a.Blob;_9=h.Elt=h.Elt||{};_=a.Element;$=A.Prepare=A.Prepare||{};ba=b.Slice=b.Slice||{};bb=h.DomUtility=h.DomUtility||{};bc=E.KeyCollection=E.KeyCollection||{};bd=h.An=h.An||{};be=z.Settings=z.Settings||{};bf=_6.Mailbox=_6.Mailbox||{};bg=z.Attrs=z.Attrs||{};bh=bg.Dyn=bg.Dyn||{};bi=h.Attrs=h.Attrs||{};bj=t.Elt=t.Elt||{};bk=t.Text=t.Text||{};bl=t.Attribute=t.Attribute||{};bm=t.Event=t.Event||{};bn=h.AttrModule=h.AttrModule||{};bo=h.AttrProxy=h.AttrProxy||{};bp=t.AfterRender=t.AfterRender||{};bq=t.AfterRenderQ=t.AfterRenderQ||{};br=b.List=b.List||{};bs=br.T=br.T||{};bt=b.Strings=b.Strings||{};bu=h.Array=h.Array||{};bv=h.Updates=h.Updates||{};bw=E.ValueCollection=E.ValueCollection||{};bx=z.Docs=z.Docs||{};by=bx.RunState=bx.RunState||{};bz=bx.NodeSet=bx.NodeSet||{};bA=b.Concurrency=b.Concurrency||{};bB=h.Anims=h.Anims||{};bC=a.StartupCode$WebSharper_UI$Doc_Proxy=a.StartupCode$WebSharper_UI$Doc_Proxy||{};bD=E.HashSetUtil=E.HashSetUtil||{};bE=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};bF=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};bG=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};bH=h.AppendList=h.AppendList||{};bI=h.DynamicAttrNode=h.DynamicAttrNode||{};bJ=a.Error;bK=b.KeyNotFoundException=b.KeyNotFoundException||{};bL=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};bM=bA.Scheduler=bA.Scheduler||{};bN=h.Easing=h.Easing||{};bO=bA.AsyncBody=bA.AsyncBody||{};bP=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};bQ=bA.CT=bA.CT||{};bR=_6.HashSet=_6.HashSet||{};bS=h.BindVar=h.BindVar||{};bT=h.String=h.String||{};bU=h.CheckedInput=h.CheckedInput||{};bV=b.CancellationTokenSource=b.CancellationTokenSource||{};bW=bx.DomNodes=bx.DomNodes||{};bX=b.Char=b.Char||{};bY=b.DateUtil=b.DateUtil||{};bZ=b.OperationCanceledException=b.OperationCanceledException||{};b0=b.Lazy=b.Lazy||{};b1=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};b2=b.Queue=b.Queue||{};b3=b.LazyExtensionsProxy=b.LazyExtensionsProxy||{};b4=b3.LazyRecord=b3.LazyRecord||{};b5=b&&b.Runtime;b6=a.console;b7=a.Math;b8=a.Date;e.Main=function(){var b9,b_,b$,ca,cb,cc,cd,ce,cf;b9=(b_=(b$=(ca=e.status().get_View(),(cb=(cc=e.location().get_View(),(cd=new n.New$1(),(cd.h.push(new u.New("location",cc)),cd))),(cb.h.push(new u.New("status",ca)),cb))),(b$.h.push(p.EventQ2(b$.k,"getlocation",function(){return b$.i;},function(){e.getLocation();})),b$)),(ce=p.CompleteHoles(b_.k,b_.h,[]),(cf=new l.New(ce[1],r.main(ce[0])),b_.i=cf,cf))).get_Doc();A.LoadLocalTemplates("");B.RunById("main",b9);};e.location=function(){x.$cctor();return x.location;};e.status=function(){x.$cctor();return x.status;};e.getLocation=function(){try{e.status().Set("Getting location...");e.geolocation().getCurrentPosition(function(b9){var b_,b$;b_=b9.coords.latitude;b$=b9.coords.longitude;e.location().Set("Latitude: "+a.String(b_)+", Longitude: "+a.String(b$));return e.status().Set("Location found!");},function(b9){return e.status().Set("Error: "+a.String(b9.message));});}catch(b9){e.status().Set("Geolocation is not supported in this browser.");}};e.geolocation=function(){x.$cctor();return x.geolocation;};f.FailWith=function(b9){throw new bJ(b9);};f.KeyValue=function(b9){return[b9.K,b9.V];};f.range=function(b9,b_){var b$;b$=1+b_-b9;return b$<=0?[]:N.init(b$,function(ca){return ca+b9;});};g=b.Obj=b5.Class({Equals:function(b9){return this===b9;},GetHashCode:function(){return -1;}},null,g);g.New=b5.Ctor(function(){},g);l=k.TemplateInstance=b5.Class({get_Doc:function(){return this.doc;},SetAnchorRoot:function(b9){this.anchorRoot=b9;}},g,l);l.New=b5.Ctor(function(b9,b_){g.New.call(this);this.doc=b_;this.allVars=b9.$==0?b9.$0:f.FailWith("Should not happen");this.anchorRoot=null;},l);m.get=function(b9,b_){m.checkBounds(b9,b_);return b9[b_];};m.length=function(b9){return b9.dims===2?b9.length*b9.length:b9.length;};m.checkBounds=function(b9,b_){if(b_<0||b_>=b9.length)f.FailWith("Index was outside the bounds of the array.");};m.set=function(b9,b_,b$){m.checkBounds(b9,b_);b9[b_]=b$;};n=k.ProviderBuilder=b5.Class({},g,n);n.New$1=b5.Ctor(function(){var b9;g.New.call(this);this.i=null;this.k=(b9=w.NewGuid(),a.String(b9));this.h=b5.MarkResizable([]);b5.SetOptional(this,"s",null);},n);o=h.Var=b5.Class({},g,o);o.New=b5.Ctor(function(){g.New.call(this);},o);p.EventQ2=function(b9,b_,b$,ca){return new y.New(b_,function(cb){return function(cc){var cd;cd=b$();cd.SetAnchorRoot(cb);return ca({Vars:cd,Anchors:cd,Target:cb,Event:cc});};});};p.CompleteHoles=function(b9,b_,b$){var cb,cc,cd,ce,cf;function ca(cg,ch,ci){var cj;return cc.Contains(cg)?null:(cj=q.Equals(ch,0)?O.GetOrAddHoleFor(b9,cg,function(){return new P.New(cg,I.Create$1(""));}):q.Equals(ch,1)?O.GetOrAddHoleFor(b9,cg,function(){return new Q.New(cg,I.Create$1(0));}):q.Equals(ch,2)?O.GetOrAddHoleFor(b9,cg,function(){return new R.New(cg,I.Create$1(false));}):q.Equals(ch,3)?O.GetOrAddHoleFor(b9,cg,function(){return new S.New(cg,I.Create$1(-8640000000000000));}):q.Equals(ch,4)?O.GetOrAddHoleFor(b9,cg,function(){return new T.New(cg,I.Create$1([]));}):q.Equals(ch,5)?O.GetOrAddHoleFor(b9,cg,function(){var ck;ck=self.document.querySelector("[ws-dom="+cg+"]");ck.removeAttribute("ws-dom");return new U.New(cg,I.Create$1({$:1,$0:ck}));}):f.FailWith("Invalid value type"),(cb.set_Item(cg,cj),{$:1,$0:cj}));}cb=new F.New$5();cc=new M.New$3();cd=_0.Get(b_);try{while(cd.MoveNext()){ce=cd.Current();cf=ce.get_Name();cc.SAdd(cf);cb.set_Item(cf,ce);}}finally{if(typeof cd=="object"&&"Dispose"in cd)cd.Dispose();}return[N.append(b_,m.choose(function(cg){return ca(cg[0],cg[1],cg[2]);},b$)),{$:0,$0:cb}];};q.Equals=function(b9,b_){var b$,ca,cb,cc;if(b9===b_)return true;else{b$=typeof b9;if(b$=="object"){if(b9===null||b9===void 0||b_===null||b_===void 0||!q.Equals(typeof b_,"object"))return false;else if("Equals"in b9)return b9.Equals(b_);else if("Equals"in b_)return false;else if(b9 instanceof a.Array&&b_ instanceof a.Array)return q.arrayEquals(b9,b_);else if(b9 instanceof a.Date&&b_ instanceof a.Date)return q.dateEquals(b9,b_);else{ca=[true];for(var cd in b9)if(function(ce){ca[0]=!b9.hasOwnProperty(ce)||b_.hasOwnProperty(ce)&&q.Equals(b9[ce],b_[ce]);return!ca[0];}(cd))break;if(ca[0]){for(var ce in b_)if(function(cf){ca[0]=!b_.hasOwnProperty(cf)||b9.hasOwnProperty(cf);return!ca[0];}(ce))break;}return ca[0];}}else return b$=="function"&&("$Func"in b9?b9.$Func===b_.$Func&&b9.$Target===b_.$Target:"$Invokes"in b9&&"$Invokes"in b_&&q.arrayEquals(b9.$Invokes,b_.$Invokes));}};q.arrayEquals=function(b9,b_){var b$,ca;if(m.length(b9)===m.length(b_)){b$=true;ca=0;while(b$&&ca<m.length(b9)){!q.Equals(m.get(b9,ca),m.get(b_,ca))?b$=false:void 0;ca=ca+1;}return b$;}else return false;};q.dateEquals=function(b9,b_){return b9.getTime()===b_.getTime();};q.Hash=function(b9){var b_;b_=typeof b9;return b_=="function"?0:b_=="boolean"?b9?1:0:b_=="number"?b9:b_=="string"?q.hashString(b9):b_=="object"?b9==null?0:b9 instanceof a.Array?q.hashArray(b9):q.hashObject(b9):0;};q.hashString=function(b9){var b_,b$,ca;if(b9===null)return 0;else{b_=5381;for(b$=0,ca=b9.length-1;b$<=ca;b$++)b_=q.hashMix(b_,b9[b$].charCodeAt());return b_;}};q.hashArray=function(b9){var b_,b$,ca;b_=-34948909;for(b$=0,ca=m.length(b9)-1;b$<=ca;b$++)b_=q.hashMix(b_,q.Hash(m.get(b9,b$)));return b_;};q.hashObject=function(b9){var b_,b$;if("GetHashCode"in b9)return b9.GetHashCode();else{b_=[0];for(var ca in b9)if(function(cb){b_[0]=q.hashMix(q.hashMix(b_[0],q.hashString(cb)),q.Hash(b9[cb]));return false;}(ca))break;return b_[0];}};q.hashMix=function(b9,b_){return(b9<<5)+b9+b_;};q.Compare=function(b9,b_){var b$,ca,cb,cc,cd,ce;if(b9===b_)return 0;else{ca=typeof b9;switch(ca=="function"?1:ca=="boolean"?2:ca=="number"?2:ca=="string"?2:ca=="object"?3:0){case 0:return typeof b_=="undefined"?0:-1;case 1:return f.FailWith("Cannot compare function values.");case 2:return b9<b_?-1:1;case 3:if(b9===null)cb=-1;else if(b_===null)cb=1;else if("CompareTo"in b9)cb=b9.CompareTo(b_);else if("CompareTo0"in b9)cb=b9.CompareTo0(b_);else if(b9 instanceof a.Array&&b_ instanceof a.Array)cb=q.compareArrays(b9,b_);else if(b9 instanceof a.Date&&b_ instanceof a.Date)cb=q.compareDates(b9,b_);else{cc=[0];for(var cf in b9)if(function(cg){return!b9.hasOwnProperty(cg)?false:!b_.hasOwnProperty(cg)?(cc[0]=1,true):(cc[0]=q.Compare(b9[cg],b_[cg]),cc[0]!==0);}(cf))break;if(cc[0]===0){for(var cg in b_)if(function(ch){return!b_.hasOwnProperty(ch)?false:!b9.hasOwnProperty(ch)&&(cc[0]=-1,true);}(cg))break;}cb=cc[0];}return cb;}}};q.compareArrays=function(b9,b_){var b$,ca;if(m.length(b9)<m.length(b_))return -1;else if(m.length(b9)>m.length(b_))return 1;else{b$=0;ca=0;while(b$===0&&ca<m.length(b9)){b$=q.Compare(m.get(b9,ca),m.get(b_,ca));ca=ca+1;}return b$;}};q.compareDates=function(b9,b_){return q.Compare(b9.getTime(),b_.getTime());};r.main=function(b9){A.LoadLocalTemplates("index");return b9?A.NamedTemplate("index",{$:1,$0:"main"},b9):void 0;};s=h.TemplateHole=b5.Class({ForTextView:function(){b6.warn("Content hole filled with attribute data",this.get_Name());return null;},AddAttribute:function(b9,b_){b6.warn("Var hole filled with non-Var data",this.get_Name());},get_AsChoiceView:function(){b6.warn("Attribute value hole filled with non-text data",this.get_Name());return{$:0,$0:""};}},g,s);s.New=b5.Ctor(function(){g.New.call(this);},s);u=t.TextView=b5.Class({get_Name:function(){return this.name;},ForTextView:function(){return{$:1,$0:this.fillWith};},get_AsChoiceView:function(){return{$:1,$0:this.fillWith};}},s,u);u.New=b5.Ctor(function(b9,b_){s.New.call(this);this.name=b9;this.fillWith=b_;},u);w.NewGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(new a.RegExp("[xy]","g"),function(b9){var b_,b$;b_=b7.random()*16|0;b$=b9=="x"?b_:b_&3|8;return b$.toString(16);});};x.$cctor=function(){x.$cctor=a.ignore;x.location=I.Create$1("");x.status=I.Create$1("");x.geolocation=self.navigator.geolocation;};y=t.EventQ=b5.Class({get_Name:function(){return this.name;},get_Value:function(){return this.fillWith;}},s,y);y.New=b5.Ctor(function(b9,b_){s.New.call(this);this.name=b9;this.fillWith=b_;},y);A.LoadLocalTemplates=function(b9){!A.LocalTemplatesLoaded()?(A.set_LocalTemplatesLoaded(true),A.LoadNestedTemplates(self.document.body,"")):void 0;A.LoadedTemplates().set_Item(b9,A.LoadedTemplateFile(""));};A.NamedTemplate=function(b9,b_,b$){var ca,cb;ca=(cb=null,[A.LoadedTemplateFile(b9).TryGetValue(b_==null?"":b_.$0,{get:function(){return cb;},set:function(cc){cb=cc;}}),cb]);return ca[0]?A.ChildrenTemplate(ca[1].cloneNode(true),b$):(b6.warn("Local template doesn't exist",b_),B.get_Empty());};A.LocalTemplatesLoaded=function(){_2.$cctor();return _2.LocalTemplatesLoaded;};A.set_LocalTemplatesLoaded=function(b9){_2.$cctor();_2.LocalTemplatesLoaded=b9;};A.LoadNestedTemplates=function(b9,b_){var ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu;function b$(cv){var cw,cx;if(!ca.ContainsKey(cv)){cw=(cx=null,[cb.TryGetValue(cv,{get:function(){return cx;},set:function(cy){cx=cy;}}),cx]);if(cw[0]){cu.SAdd(cv);cb.RemoveKey(cv);A.PrepareTemplateStrict(b_,{$:1,$0:cv},cw[1],{$:1,$0:b$});}else b6.warn(cu.Contains(cv)?"Encountered loop when instantiating "+cv:"Local template does not exist: "+cv);}}ca=A.LoadedTemplateFile(b_);cb=new F.New$5();cc=b9.querySelectorAll("[ws-template]");for(cd=0,ce=cc.length-1;cd<=ce;cd++){cf=cc[cd];cg=cf.getAttribute("ws-template").toLowerCase();cf.removeAttribute("ws-template");cb.set_Item(cg,A.FakeRootSingle(cf));}ch=b9.querySelectorAll("[ws-children-template]");for(ci=0,cj=ch.length-1;ci<=cj;ci++){ck=ch[ci];cl=ck.getAttribute("ws-children-template").toLowerCase();ck.removeAttribute("ws-children-template");cb.set_Item(cl,A.FakeRoot(ck));}cm=b9.querySelectorAll("template[id]");for(cn=0,co=cm.length-1;cn<=co;cn++){cp=cm[cn];cb.set_Item(cp.getAttribute("id").toLowerCase(),A.FakeRootFromHTMLTemplate(cp));}cq=b9.querySelectorAll("template[name]");for(cr=0,cs=cq.length-1;cr<=cs;cr++){ct=cq[cr];cb.set_Item(ct.getAttribute("name").toLowerCase(),A.FakeRootFromHTMLTemplate(ct));}cu=new M.New$3();while(cb.count>0)b$(N.head(cb.Keys()));};A.LoadedTemplates=function(){_2.$cctor();return _2.LoadedTemplates;};A.LoadedTemplateFile=function(b9){var b_,b$,ca;b_=(b$=null,[A.LoadedTemplates().TryGetValue(b9,{get:function(){return b$;},set:function(cb){b$=cb;}}),b$]);return b_[0]?b_[1]:(ca=new F.New$5(),(A.LoadedTemplates().set_Item(b9,ca),ca));};A.ChildrenTemplate=function(b9,b_){var b$,ca,cb,cc,cd;b$=A.InlineTemplate(b9,N.append(b_,A.GlobalHoles().Values()));ca=b$[1];cb=b$[0];cc=cb.Els;return!q.Equals(cc,null)&&cc.length===1&&(m.get(cc,0)instanceof H&&(q.Equals(m.get(cc,0).nodeType,H.ELEMENT_NODE)&&(cd=m.get(cc,0),true)))?_9.TreeNode(cb,ca):B.Mk({$:6,$0:cb},ca);};A.FakeRootSingle=function(b9){var b_,b$,ca,cb;b9.removeAttribute("ws-template");b_=b9.getAttribute("ws-replace");if(b_==null);else{b9.removeAttribute("ws-replace");b$=b9.parentNode;q.Equals(b$,null)?void 0:(ca=self.document.createElement(b9.tagName),ca.setAttribute("ws-replace",b_),b$.replaceChild(ca,b9));}cb=self.document.createElement("div");cb.appendChild(b9);return cb;};A.FakeRoot=function(b9){var b_;b_=self.document.createElement("div");while(b9.hasChildNodes())b_.appendChild(b9.firstChild);return b_;};A.FakeRootFromHTMLTemplate=function(b9){var b_,b$,ca,cb;b_=self.document.createElement("div");b$=b9.content;for(ca=0,cb=b$.childNodes.length-1;ca<=cb;ca++)b_.appendChild(b$.childNodes[ca].cloneNode(true));return b_;};A.PrepareTemplateStrict=function(b9,b_,b$,ca){var cb,cc;function cd(cj,ck){var cl,cm,cn,co,cp,cr,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK,cL;function cq(cM){}while(true)switch(cj){case 0:if(ck!==null){cl=ck.nextSibling;if(q.Equals(ck.nodeType,H.TEXT_NODE))$.convertTextNode(ck);else if(q.Equals(ck.nodeType,H.ELEMENT_NODE))cf(ck);ck=cl;}else return null;break;case 1:cr=ba.string(ck.nodeName,{$:1,$0:3},null).toLowerCase();cs=(cm=cr.indexOf("."),cm===-1?[b9,cr]:[ba.string(cr,null,{$:1,$0:cm-1}),ba.string(cr,{$:1,$0:cm+1},null)]);ct=cs[1];cu=cs[0];if(cu!=""&&!A.LoadedTemplates().ContainsKey(cu))return $.failNotLoaded(ct);else{if(cu==""&&ca!=null)ca.$0(ct);cv=A.LoadedTemplates().Item(cu);if(!cv.ContainsKey(ct))return $.failNotLoaded(ct);else{cw=cv.Item(ct);cx=cw.cloneNode(true);cy=new M.New$3();cz=new F.New$5();cA=ck.attributes;for(cB=0,cC=cA.length-1;cB<=cC;cB++){cD=cA.item(cB).name.toLowerCase();cz.set_Item(cD,(cE=cA.item(cB).nodeValue,cE==""?cD:cE.toLowerCase()));if(!cy.SAdd(cD))b6.warn("Hole mapped twice",cD);}for(cF=0,cG=ck.childNodes.length-1;cF<=cG;cF++){cH=ck.childNodes[cF];if(q.Equals(cH.nodeType,H.ELEMENT_NODE))!cy.SAdd(cH.nodeName.toLowerCase())?b6.warn("Hole filled twice",ct):void 0;}cI=ck.childNodes.length===1&&q.Equals(ck.firstChild.nodeType,H.TEXT_NODE);if(cI){co=$.fillTextHole(cx,ck.firstChild.textContent,ct);((function(cM){return function(cN){if(cN!=null)cM(cN.$0);};}((cp=function(cM){return function(cN){return cM.SAdd(cN);};}(cy),function(cM){return cq(cp(cM));})))(co));}$.removeHolesExcept(cx,cy);if(!cI){for(cJ=0,cK=ck.childNodes.length-1;cJ<=cK;cJ++){cL=ck.childNodes[cJ];if(q.Equals(cL.nodeType,H.ELEMENT_NODE))cL.hasAttributes()?$.fillInstanceAttrs(cx,cL):ce(cx,cL);}}$.mapHoles(cx,cz);$.fill(cx,ck.parentNode,ck);ck.parentNode.removeChild(ck);return;}}break;}}function ce(cj,ck){var cl,cm,co,cp;function cn(cq,cr){var cs;if(co=="title"&&ck.hasChildNodes()){cs=bb.ParseHTMLIntoFakeRoot(ck.textContent);ck.removeChild(ck.firstChild);while(cs.hasChildNodes())ck.appendChild(cs.firstChild);}else null;cf(ck);return $.fill(ck,cq,cr);}co=ck.nodeName.toLowerCase();A.foreachNotPreserved(cj,"[ws-attr-holes]",function(cq){var cr,cs,ct,cu,cv;cr=bt.SplitChars(cq.getAttribute("ws-attr-holes"),[" "],1);for(cs=0,ct=cr.length-1;cs<=ct;cs++){cu=m.get(cr,cs);cq.setAttribute(cu,(cv=new a.RegExp("\\${"+co+"}","ig"),cq.getAttribute(cu).replace(cv,ck.textContent)));}});cp=cj.querySelector("[ws-hole="+co+"]");if(q.Equals(cp,null)){cl=cj.querySelector("[ws-replace="+co+"]");return q.Equals(cl,null)?(cm=cj.querySelector("slot[name="+co+"]"),cj.tagName.toLowerCase()=="template"?(cn(cm.parentNode,cm),void cm.parentNode.removeChild(cm)):null):(cn(cl.parentNode,cl),void cl.parentNode.removeChild(cl));}else{while(cp.hasChildNodes())cp.removeChild(cp.lastChild);cp.removeAttribute("ws-hole");return cn(cp,null);}}function cf(cj){if(!cj.hasAttribute("ws-preserve"))if(bt.StartsWith(cj.nodeName.toLowerCase(),"ws-"))ch(cj);else{$.convertAttrs(cj);cg(cj.firstChild);}}function cg(cj){return cd(0,cj);}function ch(cj){return cd(1,cj);}function ci(cj){var ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv;while(true){ck=cj.querySelector("[ws-template]");if(q.Equals(ck,null)){cl=cj.querySelector("[ws-children-template]");if(q.Equals(cl,null)){cm=cj.querySelectorAll("template[id]");for(cn=1,co=cm.length-1;cn<=co;cn++){cp=cm[cn];if(cb.Contains(cp));else{A.PrepareTemplateStrict(b9,{$:1,$0:cp.getAttribute("id")},cp,null);cb.SAdd(cp);}}cq=cj.querySelectorAll("template[name]");for(cr=1,cs=cq.length-1;cr<=cs;cr++){ct=cq[cr];if(cb.Contains(ct));else{A.PrepareTemplateStrict(b9,{$:1,$0:ct.getAttribute("name")},ct,null);cb.SAdd(ct);}}return null;}else{cu=cl.getAttribute("ws-children-template");cl.removeAttribute("ws-children-template");A.PrepareTemplateStrict(b9,{$:1,$0:cu},cl,null);cj=cj;}}else{cv=ck.getAttribute("ws-template");(A.PrepareSingleTemplate(b9,{$:1,$0:cv},ck))(null);cj=cj;}}}cb=new M.New$3();cc=(b_==null?"":b_.$0).toLowerCase();A.LoadedTemplateFile(b9).set_Item(cc,b$);if(b$.hasChildNodes()){ci(b$);cg(b$.firstChild);}};A.InlineTemplate=function(b9,b_){var b$,ca,cb,cc,cd,ch,ci,cj,ck,cl,cm,cn;function ce(co,cp){var cq,cr,cs;cq=bi.Insert(co,cp);ci.push(bi.Updates(cq));cj.push([co,cq]);cr=b5.GetOptional(cq.OnAfterRender);return cr==null?null:(cs=cr.$0,void ck.push(function(){cs(co);}));}function cf(co){var cp,cq,cr,cs;cp=(cq=null,[cl.TryGetValue(co,{get:function(){return cq;},set:function(ct){cq=ct;}}),cq]);return cp[0]?(cr=cp[1],cr instanceof bj?{$:1,$0:cr.get_Value()}:cr instanceof bk?{$:1,$0:B.TextNode(cr.get_Value())}:(cs=cr.ForTextView(),cs==null?null:{$:1,$0:B.TextView(cs.$0)})):null;}function cg(){A.foreachNotPreservedwsDOM("[ws-dom]",function(co){var cp,cq,cr,cs,ct,cu,cv;cp=(cq=null,[cl.TryGetValue(co.getAttribute("ws-dom").toLowerCase(),{get:function(){return cq;},set:function(cw){cq=cw;}}),cq]);if(cp[0]){cr=cp[1];cr instanceof U?(cs=cr.get_Value(),co.removeAttribute("ws-dom"),ct=co,cu=new a.MutationObserver(function(cw,cx){m.iter(function(cy){function cz(cA,cB,cC,cD){if(cA===ct&&cy.addedNodes.length!==1){cs.SetFinal(null);cx.disconnect();}}cy.removedNodes.forEach(b5.CreateFuncWithArgs(function(cA){return cz(cA[0],cA[1],cA[2],cA[3]);}),null);},cw);}),co.parentElement!==null?cu.observe(co.parentElement,(cv={},cv.childList=true,cv)):void 0,cs.Set({$:1,$0:co}),V.Sink(function(cw){var cx;if(cw!=null&&cw.$==1){cx=cw.$0;if(ct===cx);else{ct.replaceWith.apply(ct,[cx]);ct=cx;}}else{ct.remove();cu.disconnect();}},cs.get_View())):void 0;}});}ch=[];ci=[];cj=[];ck=[];cl=new F.New$5();cm=_0.Get(b_);try{while(cm.MoveNext()){cn=cm.Current();cl.set_Item(cn.get_Name(),cn);}}finally{if(typeof cm=="object"&&"Dispose"in cm)cm.Dispose();}b$=bb.ChildrenArray(b9);A.foreachNotPreserved(b9,"[ws-hole]",function(co){var cp,cq,cr;cr=co.getAttribute("ws-hole");co.removeAttribute("ws-hole");while(co.hasChildNodes())co.removeChild(co.lastChild);cp=cf(cr);if(cp!=null&&cp.$==1){cq=cp.$0;_3.LinkElement(co,cq.docNode);ch.push(_4.New(bi.Empty(co),cq.docNode,null,co,_7.Int(),null));ci.push(cq.updates);}});A.foreachNotPreserved(b9,"[ws-replace]",function(co){var cp,cq,cr,cs,ct,cu;cp=cf(co.getAttribute("ws-replace"));if(cp!=null&&cp.$==1){cq=cp.$0;cr=co.parentNode;cs=self.document.createTextNode("");cr.replaceChild(cs,co);ct=_3.InsertBeforeDelim(cs,cq.docNode);cu=m.tryFindIndex(function(cv){return co===cv;},b$);cu==null?void 0:m.set(b$,cu.$0,cq.docNode);ch.push(_4.New(bi.Empty(cr),cq.docNode,{$:1,$0:[ct,cs]},cr,_7.Int(),null));ci.push(cq.updates);}});ca=false;A.foreachNotPreserved(b9,"slot",function(co){var cp,cq,cr,cs;cr=co.getAttribute("name");cs=cr==""||cr==null?"default":cr.toLowerCase();if(ca&&cs=="default"||!q.Equals(b9.parentElement,null))void 0;else{while(co.hasChildNodes())co.removeChild(co.lastChild);if(cs=="default")ca=true;cp=cf(cs);if(cp!=null&&cp.$==1){cq=cp.$0;_3.LinkElement(co,cq.docNode);ch.push(_4.New(bi.Empty(co),cq.docNode,null,co,_7.Int(),null));ci.push(cq.updates);}}});A.foreachNotPreserved(b9,"[ws-attr]",function(co){var cp,cq,cr,cs;cp=co.getAttribute("ws-attr");co.removeAttribute("ws-attr");cq=(cr=null,[cl.TryGetValue(cp,{get:function(){return cr;},set:function(ct){cr=ct;}}),cr]);if(cq[0]){cs=cq[1];cs instanceof bl?ce(co,cs.get_Value()):b6.warn("Attribute hole filled with non-attribute data",cp);}});A.foreachNotPreserved(b9,"[ws-on]",function(co){ce(co,bo.Concat(m.choose(function(cp){var cq,cr,cs,ct;cq=bt.SplitChars(cp,[":"],1);cr=(cs=null,[cl.TryGetValue(m.get(cq,1),{get:function(){return cs;},set:function(cu){cs=cu;}}),cs]);return cr[0]?(ct=cr[1],ct instanceof bm?{$:1,$0:bn.Handler(m.get(cq,0),ct.get_Value())}:ct instanceof y?{$:1,$0:bo.Handler(m.get(cq,0),ct.get_Value())}:(b6.warn("Event hole on"+m.get(cq,0)+" filled with non-event data",m.get(cq,1)),null)):null;},bt.SplitChars(co.getAttribute("ws-on"),[" "],1))));co.removeAttribute("ws-on");});A.foreachNotPreserved(b9,"[ws-onafterrender]",function(co){var cp,cq,cr,cs;cp=co.getAttribute("ws-onafterrender");cq=(cr=null,[cl.TryGetValue(cp,{get:function(){return cr;},set:function(ct){cr=ct;}}),cr]);if(cq[0]){cs=cq[1];cs instanceof bp?(co.removeAttribute("ws-onafterrender"),ce(co,bn.OnAfterRender(cs.get_Value()))):cs instanceof bq?(co.removeAttribute("ws-onafterrender"),ce(co,bn.OnAfterRender(cs.get_Value()))):b6.warn("onafterrender hole filled with non-onafterrender data",cp);}});A.foreachNotPreserved(b9,"[ws-var]",function(co){var cp,cq,cr;cp=co.getAttribute("ws-var");co.removeAttribute("ws-var");cq=(cr=null,[cl.TryGetValue(cp,{get:function(){return cr;},set:function(cs){cr=cs;}}),cr]);if(cq[0])cq[1].AddAttribute(function(cs){return function(ct){return ce(cs,ct);};},co);});A.foreachNotPreserved(b9,"[ws-attr-holes]",function(co){var cp,cq,cr,cs;cp=new a.RegExp(A.TextHoleRE(),"g");cq=bt.SplitChars(co.getAttribute("ws-attr-holes"),[" "],1);co.removeAttribute("ws-attr-holes");for(cr=0,cs=cq.length-1;cr<=cs;cr++)(function(){var ct,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD,cE,cF;cC=m.get(cq,cr);cD=co.getAttribute(cC);ct=null;cu=0;cE=[];while(ct=cp.exec(cD),ct!==null){cF=ba.string(cD,{$:1,$0:cu},{$:1,$0:cp.lastIndex-m.get(ct,0).length-1});cu=cp.lastIndex;cE.push([cF,m.get(ct,1)]);}cw=ba.string(cD,{$:1,$0:cu},null);cp.lastIndex=0;cx=m.foldBack(function(cG,cH){return(function(cI){var cJ,cK;cJ=cI[0];cK=cI[1];return function(cL){var cM,cN,cO,cP,cQ;cM=cL[0];cN=cL[1];cO=(cP=(cQ=null,[cl.TryGetValue(cK,{get:function(){return cQ;},set:function(cR){cQ=cR;}}),cQ]),cP[0]?cP[1].get_AsChoiceView():{$:0,$0:""});return cO.$==1?[cJ,new bs({$:1,$0:cM==""?cO.$0:V.Map(function(cR){return cR+cM;},cO.$0),$1:cN})]:[cJ+cO.$0+cM,cN];};}(cG))(cH);},cE,[cw,bs.Empty]);return ce(co,cx[1].$==1?cx[1].$1.$==1?cx[1].$1.$1.$==1?cx[1].$1.$1.$1.$==0?(cy=cx[0],bn.Dynamic(cC,V.Map3(function(cG,cH,cI){return cy+cG+cH+cI;},cx[1].$0,cx[1].$1.$0,cx[1].$1.$1.$0))):(cz=cx[0],bn.Dynamic(cC,V.Map(function(cG){return cz+bt.concat("",cG);},V.Sequence(cx[1])))):(cA=cx[0],bn.Dynamic(cC,V.Map2(function(cG,cH){return cA+cG+cH;},cx[1].$0,cx[1].$1.$0))):cx[0]==""?bn.Dynamic(cC,cx[1].$0):(cB=cx[0],bn.Dynamic(cC,V.Map(function(cG){return cB+cG;},cx[1].$0))):bo.Create(cC,cx[0]));}());});return[b5.DeleteEmptyFields({Els:b$,Dirty:true,Holes:ch,Attrs:cj,Render:(cb=ck.length==0?{$:1,$0:function(){cg();}}:{$:1,$0:function(co){cg();m.iter(function(cp){cp(co);},ck);}},cb?cb.$0:void 0),El:(cc=!q.Equals(b$,null)&&b$.length===1&&(m.get(b$,0)instanceof H&&(m.get(b$,0)instanceof _&&(cd=m.get(b$,0),true)))?{$:1,$0:cd}:null,cc?cc.$0:void 0)},["Render","El"]),bu.TreeReduce(V.Const(),V.Map2Unit,ci)];};A.GlobalHoles=function(){_2.$cctor();return _2.GlobalHoles;};A.foreachNotPreserved=function(b9,b_,b$){bb.IterSelector(b9,b_,function(ca){if(ca.closest("[ws-preserve]")==null)b$(ca);});};A.PrepareSingleTemplate=function(b9,b_,b$){var ca;ca=A.FakeRootSingle(b$);return function(cb){A.PrepareTemplateStrict(b9,b_,ca,cb);};};A.foreachNotPreservedwsDOM=function(b9,b_){bb.IterSelectorDoc(b9,function(b$){if(b$.closest("[ws-preserve]")==null)b_(b$);});};A.TextHoleRE=function(){_2.$cctor();return _2.TextHoleRE;};B=h.Doc=b5.Class({},g,B);B.RunById=function(b9,b_){var b$;b$=self.document.getElementById(b9);if(q.Equals(b$,null))f.FailWith("invalid id: "+b9);else B.Run(b$,b_);};B.Run=function(b9,b_){_3.LinkElement(b9,b_.docNode);B.RunInPlace(false,b9,b_);};B.get_Empty=function(){return B.Mk(null,V.Const());};B.RunInPlace=function(b9,b_,b$){var ca;ca=_3.CreateRunState(b_,b$.docNode);V.Sink(bd.get_UseAnimations()||be.BatchUpdatesEnabled()?bf.StartProcessor(_3.PerformAnimatedUpdate(b9,ca,b$.docNode)):function(){_3.PerformSyncUpdate(b9,ca,b$.docNode);},b$.updates);};B.Mk=function(b9,b_){return new B.New(b9,b_);};B.TextNode=function(b9){return B.Mk({$:5,$0:self.document.createTextNode(b9)},V.Const());};B.TextView=function(b9){var b_;b_=_3.CreateTextNode();return B.Mk({$:4,$0:b_},V.Map(function(b$){_3.UpdateTextNode(b_,b$);},b9));};B.New=b5.Ctor(function(b9,b_){g.New.call(this);this.docNode=b9;this.updates=b_;},B);D.NewFromSeq=function(b9){var b_,b$,ca;b_={};b$=_0.Get(b9);try{while(b$.MoveNext()){ca=b$.Current();b_[ca[0]]=ca[1];}}finally{if(typeof b$=="object"&&"Dispose"in b$)b$.Dispose();}return b_;};F=E.Dictionary=b5.Class({set_Item:function(b9,b_){this.set(b9,b_);},set:function(b9,b_){var b$,ca,cb,cc;b$=this;ca=this.hash(b9);cb=this.data[ca];if(cb==null){this.count=this.count+1;this.data[ca]=new a.Array({K:b9,V:b_});}else{cc=m.tryFindIndex(function(cd){return b$.equals.apply(null,[(f.KeyValue(cd))[0],b9]);},cb);cc==null?(this.count=this.count+1,cb.push({K:b9,V:b_})):cb[cc.$0]={K:b9,V:b_};}},TryGetValue:function(b9,b_){var b$,ca,cb;b$=this;ca=this.data[this.hash(b9)];return ca==null?false:(cb=m.tryPick(function(cc){var cd;cd=f.KeyValue(cc);return b$.equals.apply(null,[cd[0],b9])?{$:1,$0:cd[1]}:null;},ca),cb!=null&&cb.$==1&&(b_.set(cb.$0),true));},ContainsKey:function(b9){var b_,b$;b_=this;b$=this.data[this.hash(b9)];return b$==null?false:m.exists(function(ca){return b_.equals.apply(null,[(f.KeyValue(ca))[0],b9]);},b$);},RemoveKey:function(b9){return this.remove(b9);},Keys:function(){return new bc.New(this);},GetEnumerator:function(){return _0.Get0(m.concat(K.GetFieldValues(this.data)));},Values:function(){return new bw.New(this);},remove:function(b9){var b_,b$,ca,cb;b_=this;b$=this.hash(b9);ca=this.data[b$];return ca==null?false:(cb=m.filter(function(cc){return!b_.equals.apply(null,[(f.KeyValue(cc))[0],b9]);},ca),m.length(cb)<ca.length&&(this.count=this.count-1,this.data[b$]=cb,true));},Item:function(b9){return this.get(b9);},get:function(b9){var b_,b$;b_=this;b$=this.data[this.hash(b9)];return b$==null?Z.notPresent():m.pick(function(ca){var cb;cb=f.KeyValue(ca);return b_.equals.apply(null,[cb[0],b9])?{$:1,$0:cb[1]}:null;},b$);}},g,F);F.New$5=b5.Ctor(function(){F.New$6.call(this,[],q.Equals,q.Hash);},F);F.New$6=b5.Ctor(function(b9,b_,b$){var ca,cb;g.New.call(this);this.equals=b_;this.hash=b$;this.count=0;this.data=[];ca=_0.Get(b9);try{while(ca.MoveNext()){cb=ca.Current();this.set(cb.K,cb.V);}}finally{if(typeof ca=="object"&&"Dispose"in ca)ca.Dispose();}},F);I=h.Var$1=b5.Class({},g,I);I.Create$1=function(b9){return new X.New(false,Y.New({$:2,$0:b9,$1:[]}),b9);};K.GetFieldValues=function(b9){var b_,b$;b_=[];for(var ca in b9)b_.push(b9[ca]);return b_;};M=E.HashSet=b5.Class({SAdd:function(b9){return this.add(b9);},Contains:function(b9){var b_;b_=this.data[this.hash(b9)];return b_==null?false:this.arrContains(b9,b_);},add:function(b9){var b_,b$;b_=this.hash(b9);b$=this.data[b_];return b$==null?(this.data[b_]=[b9],this.count=this.count+1,true):this.arrContains(b9,b$)?false:(b$.push(b9),this.count=this.count+1,true);},arrContains:function(b9,b_){var b$,ca,cb,cc;b$=true;ca=0;cc=b_.length;while(b$&&ca<cc)if(this.equals.apply(null,[b_[ca],b9]))b$=false;else ca=ca+1;return!b$;},GetEnumerator:function(){return _0.Get(bD.concat(this.data));},ExceptWith:function(b9){var b_;b_=_0.Get(b9);try{while(b_.MoveNext())this.Remove(b_.Current());}finally{if(typeof b_=="object"&&"Dispose"in b_)b_.Dispose();}},Count:function(){return this.count;},IntersectWith:function(b9){var b_,b$,ca,cb,cc;b_=new M.New$4(b9,this.equals,this.hash);b$=bD.concat(this.data);for(ca=0,cb=b$.length-1;ca<=cb;ca++){cc=b$[ca];if(!b_.Contains(cc))this.Remove(cc);}},Remove:function(b9){var b_;b_=this.data[this.hash(b9)];return b_==null?false:this.arrRemove(b9,b_)&&(this.count=this.count-1,true);},CopyTo:function(b9,b_){var b$,ca,cb;b$=bD.concat(this.data);for(ca=0,cb=b$.length-1;ca<=cb;ca++)m.set(b9,ca+b_,b$[ca]);},arrRemove:function(b9,b_){var b$,ca,cb,cc;b$=true;ca=0;cc=b_.length;while(b$&&ca<cc)if(this.equals.apply(null,[b_[ca],b9])){b_.splice.apply(b_,[ca,1]);b$=false;}else ca=ca+1;return!b$;}},g,M);M.New$3=b5.Ctor(function(){M.New$4.call(this,[],q.Equals,q.Hash);},M);M.New$4=b5.Ctor(function(b9,b_,b$){var ca;g.New.call(this);this.equals=b_;this.hash=b$;this.data=[];this.count=0;ca=_0.Get(b9);try{while(ca.MoveNext())this.add(ca.Current());}finally{if(typeof ca=="object"&&"Dispose"in ca)ca.Dispose();}},M);M.New$2=b5.Ctor(function(b9){M.New$4.call(this,b9,q.Equals,q.Hash);},M);N.append=function(b9,b_){return{GetEnumerator:function(){var b$,ca;b$=_0.Get(b9);ca=[true];return new _1.New(b$,null,function(cb){var cc;return cb.s.MoveNext()?(cb.c=cb.s.Current(),true):(cc=cb.s,!q.Equals(cc,null)?cc.Dispose():void 0,cb.s=null,ca[0]&&(ca[0]=false,cb.s=_0.Get(b_),cb.s.MoveNext()?(cb.c=cb.s.Current(),true):(cb.s.Dispose(),cb.s=null,false)));},function(cb){var cc;cc=cb.s;if(!q.Equals(cc,null))cc.Dispose();});}};};N.head=function(b9){var b_;b_=_0.Get(b9);try{return b_.MoveNext()?b_.Current():N.insufficient();}finally{if(typeof b_=="object"&&"Dispose"in b_)b_.Dispose();}};N.fold=function(b9,b_,b$){var ca,cb;ca=b_;cb=_0.Get(b$);try{while(cb.MoveNext())ca=b9(ca,cb.Current());return ca;}finally{if(typeof cb=="object"&&"Dispose"in cb)cb.Dispose();}};N.iter=function(b9,b_){var b$;b$=_0.Get(b_);try{while(b$.MoveNext())b9(b$.Current());}finally{if(typeof b$=="object"&&"Dispose"in b$)b$.Dispose();}};N.map=function(b9,b_){return{GetEnumerator:function(){var b$;b$=_0.Get(b_);return new _1.New(null,null,function(ca){return b$.MoveNext()&&(ca.c=b9(b$.Current()),true);},function(){b$.Dispose();});}};};N.delay=function(b9){return{GetEnumerator:function(){return _0.Get(b9());}};};N.max=function(b9){var b_,b$,ca;b_=_0.Get(b9);try{if(!b_.MoveNext())N.seqEmpty();b$=b_.Current();while(b_.MoveNext()){ca=b_.Current();if(q.Compare(ca,b$)===1)b$=ca;}return b$;}finally{if(typeof b_=="object"&&"Dispose"in b_)b_.Dispose();}};N.init=function(b9,b_){return N.take(b9,N.initInfinite(b_));};N.seqEmpty=function(){return f.FailWith("The input sequence was empty.");};N.forall=function(b9,b_){return!N.exists(function(b$){return!b9(b$);},b_);};N.take=function(b9,b_){b9<0?N.nonNegative():void 0;return{GetEnumerator:function(){var b$;b$=[_0.Get(b_)];return new _1.New(0,null,function(ca){var cb;ca.s=ca.s+1;return ca.s>b9?false:(cb=b$[0],q.Equals(cb,null)?N.insufficient():cb.MoveNext()?(ca.c=cb.Current(),ca.s===b9?(cb.Dispose(),b$[0]=null):void 0,true):(cb.Dispose(),b$[0]=null,N.insufficient()));},function(){var ca;ca=b$[0];if(!q.Equals(ca,null))ca.Dispose();});}};};N.initInfinite=function(b9){return{GetEnumerator:function(){return new _1.New(0,null,function(b_){b_.c=b9(b_.s);b_.s=b_.s+1;return true;},void 0);}};};N.exists=function(b9,b_){var b$,ca;b$=_0.Get(b_);try{ca=false;while(!ca&&b$.MoveNext())ca=b9(b$.Current());return ca;}finally{if(typeof b$=="object"&&"Dispose"in b$)b$.Dispose();}};m.choose=function(b9,b_){var b$,ca,cb,cc;b$=[];for(ca=0,cb=b_.length-1;ca<=cb;ca++){cc=b9(b_[ca]);if(cc==null);else b$.push(cc.$0);}return b$;};m.tryFindIndex=function(b9,b_){var b$,ca;b$=null;ca=0;while(ca<b_.length&&b$==null){b9(b_[ca])?b$={$:1,$0:ca}:void 0;ca=ca+1;}return b$;};m.tryPick=function(b9,b_){var b$,ca,cb;b$=null;ca=0;while(ca<b_.length&&b$==null){cb=b9(b_[ca]);if(cb!=null&&cb.$==1)b$=cb;ca=ca+1;}return b$;};m.exists=function(b9,b_){var b$,ca,cb,cc;b$=false;ca=0;cc=m.length(b_);while(!b$&&ca<cc)if(b9(b_[ca]))b$=true;else ca=ca+1;return b$;};m.concat=function(b9){return a.Array.prototype.concat.apply([],m.ofSeq(b9));};m.iter=function(b9,b_){var b$,ca;for(b$=0,ca=b_.length-1;b$<=ca;b$++)b9(b_[b$]);};m.foldBack=function(b9,b_,b$){var ca,cb,cc,cd,ce;ca=b$;cc=b_.length;for(cd=1,ce=cc;cd<=ce;cd++)ca=b9(b_[cc-cd],ca);return ca;};m.map=function(b9,b_){var b$,ca,cb;b$=new a.Array(b_.length);for(ca=0,cb=b_.length-1;ca<=cb;ca++)b$[ca]=b9(b_[ca]);return b$;};m.filter=function(b9,b_){var b$,ca,cb;b$=[];for(ca=0,cb=b_.length-1;ca<=cb;ca++)if(b9(b_[ca]))b$.push(b_[ca]);return b$;};m.ofSeq=function(b9){var b_,b$;if(b9 instanceof a.Array)return b9.slice();else if(b9 instanceof bs)return m.ofList(b9);else{b_=[];b$=_0.Get(b9);try{while(b$.MoveNext())b_.push(b$.Current());return b_;}finally{if(typeof b$=="object"&&"Dispose"in b$)b$.Dispose();}}};m.pick=function(b9,b_){var b$;b$=m.tryPick(b9,b_);return b$==null?f.FailWith("KeyNotFoundException"):b$.$0;};m.ofList=function(b9){var b_,b$;b$=[];b_=b9;while(!(b_.$==0)){b$.push(br.head(b_));b_=br.tail(b_);}return b$;};m.forall=function(b9,b_){var b$,ca,cb,cc;b$=true;ca=0;cc=m.length(b_);while(b$&&ca<cc)if(b9(b_[ca]))ca=ca+1;else b$=false;return b$;};m.create=function(b9,b_){var b$,ca,cb;b$=new a.Array(b9);for(ca=0,cb=b9-1;ca<=cb;ca++)b$[ca]=b_;return b$;};m.init=function(b9,b_){var b$,ca,cb;if(b9<0)f.FailWith("Negative size given.");else null;b$=new a.Array(b9);for(ca=0,cb=b9-1;ca<=cb;ca++)b$[ca]=b_(ca);return b$;};O.$cctor=function(){O.$cctor=a.ignore;O.initialized=new F.New$5();};O=k.TemplateInitializer=b5.Class({},g,O);O.GetOrAddHoleFor=function(b9,b_,b$){var ca,cb,cc,cd;O.$cctor();ca=O.GetHolesFor(b9);cb=(cc=null,[ca.TryGetValue(b_,{get:function(){return cc;},set:function(ce){cc=ce;}}),cc]);return cb[0]?cb[1]:(cd=b$(),(ca.set_Item(b_,cd),cd));};O.GetHolesFor=function(b9){var b_,b$,ca;O.$cctor();b_=(b$=null,[O.initialized.TryGetValue(b9,{get:function(){return b$;},set:function(cb){b$=cb;}}),b$]);return b_[0]?b_[1]:(ca=new F.New$5(),(O.initialized.set_Item(b9,ca),ca));};P=t.VarStr=b5.Class({get_Name:function(){return this.name;},ForTextView:function(){return{$:1,$0:this.fillWith.get_View()};},AddAttribute:function(b9,b_){(b9(b_))(bn.Value(this.fillWith));},get_AsChoiceView:function(){return{$:1,$0:V.Map(a.String,this.fillWith.get_View())};}},s,P);P.New=b5.Ctor(function(b9,b_){s.New.call(this);this.name=b9;this.fillWith=b_;},P);Q=t.VarFloatUnchecked=b5.Class({get_Name:function(){return this.name;},ForTextView:function(){return{$:1,$0:V.Map(a.String,this.fillWith.get_View())};},AddAttribute:function(b9,b_){(b9(b_))(bn.FloatValueUnchecked(this.fillWith));},get_AsChoiceView:function(){return{$:1,$0:V.Map(a.String,this.fillWith.get_View())};}},s,Q);Q.New=b5.Ctor(function(b9,b_){s.New.call(this);this.name=b9;this.fillWith=b_;},Q);R=t.VarBool=b5.Class({get_Name:function(){return this.name;},ForTextView:function(){return{$:1,$0:V.Map(a.String,this.fillWith.get_View())};},AddAttribute:function(b9,b_){(b9(b_))(bn.Checked(this.fillWith));},get_AsChoiceView:function(){return{$:1,$0:V.Map(a.String,this.fillWith.get_View())};}},s,R);R.New=b5.Ctor(function(b9,b_){s.New.call(this);this.name=b9;this.fillWith=b_;},R);S=t.VarDateTime=b5.Class({get_Name:function(){return this.name;},ForTextView:function(){return{$:1,$0:V.Map(function(b9){return(new a.Date(b9)).toLocaleString();},this.fillWith.get_View())};},AddAttribute:function(b9,b_){(b9(b_))(bn.DateTimeValue(this.fillWith));},get_AsChoiceView:function(){return{$:1,$0:V.Map(function(b9){return(new a.Date(b9)).toLocaleString();},this.fillWith.get_View())};}},s,S);S.New=b5.Ctor(function(b9,b_){s.New.call(this);this.name=b9;this.fillWith=b_;},S);T=t.VarFile=b5.Class({get_Name:function(){return this.name;},ForTextView:function(){return{$:1,$0:V.Map(a.String,this.fillWith.get_View())};},AddAttribute:function(b9,b_){(b9(b_))(bn.FileValue(this.fillWith));},get_AsChoiceView:function(){return{$:1,$0:V.Map(a.String,this.fillWith.get_View())};}},s,T);T.New=b5.Ctor(function(b9,b_){s.New.call(this);this.name=b9;this.fillWith=b_;},T);U=t.VarDomElement=b5.Class({get_Name:function(){return this.name;},get_Value:function(){return this.fillWith;}},s,U);U.New=b5.Ctor(function(b9,b_){s.New.call(this);this.name=b9;this.fillWith=b_;},U);V=h.View=b5.Class({},null,V);W.TryParseInt32=function(b9,b_){return W.TryParse(b9,-2147483648,2147483647,b_);};X=h.ConcreteVar=b5.Class({get_View:function(){return this.view;},Set:function(b9){if(this.isConst)(function(b_){return b_("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(b_){b6.log(b_);}));else{Y.Obsolete(this.snap);this.current=b9;this.snap=Y.New({$:2,$0:b9,$1:[]});}},SetFinal:function(b9){if(this.isConst)(function(b_){return b_("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(b_){b6.log(b_);}));else{Y.Obsolete(this.snap);this.isConst=true;this.current=b9;this.snap=Y.New({$:0,$0:b9});}},Get:function(){return this.current;},UpdateMaybe:function(b9){var b_;b_=b9(this.Get());if(b_!=null&&b_.$==1)this.Set(b_.$0);}},o,X);X.New=b5.Ctor(function(b9,b_,b$){var ca;ca=this;o.New.call(this);this.isConst=b9;this.current=b$;this.snap=b_;this.view=function(){return ca.snap;};this.id=_7.Int();},X);Y.WhenRun=function(b9,b_,b$){var ca;ca=b9.s;if(ca==null)b$();else ca!=null&&ca.$==2?(ca.$1.push(b$),b_(ca.$0)):ca!=null&&ca.$==3?(ca.$0.push(b_),ca.$1.push(b$)):b_(ca.$0);};Y.Map=function(b9,b_){var b$,ca;b$=b_.s;return b$!=null&&b$.$==0?Y.New({$:0,$0:b9(b$.$0)}):(ca=Y.New({$:3,$0:[],$1:[]}),(Y.When(b_,function(cb){Y.MarkDone(ca,b_,b9(cb));},ca),ca));};Y.Map3=function(b9,b_,b$,ca){var cb,cc,cd,ce;function cf(cg){var ch,ci,cj,ck;if(!(ch=ce.s,ch!=null&&ch.$==0||ch!=null&&ch.$==2)){ci=Y.ValueAndForever(b_);cj=Y.ValueAndForever(b$);ck=Y.ValueAndForever(ca);if(ci!=null&&ci.$==1)cj!=null&&cj.$==1?ck!=null&&ck.$==1?ci.$0[1]&&cj.$0[1]&&ck.$0[1]?Y.MarkForever(ce,b9(ci.$0[0],cj.$0[0],ck.$0[0])):Y.MarkReady(ce,b9(ci.$0[0],cj.$0[0],ck.$0[0])):void 0:void 0;}}cb=b_.s;cc=b$.s;cd=ca.s;return cb!=null&&cb.$==0?cc!=null&&cc.$==0?cd!=null&&cd.$==0?Y.New({$:0,$0:b9(cb.$0,cc.$0,cd.$0)}):Y.Map3Opt1(b9,cb.$0,cc.$0,ca):cd!=null&&cd.$==0?Y.Map3Opt2(b9,cb.$0,cd.$0,b$):Y.Map3Opt3(b9,cb.$0,b$,ca):cc!=null&&cc.$==0?cd!=null&&cd.$==0?Y.Map3Opt4(b9,cc.$0,cd.$0,b_):Y.Map3Opt5(b9,cc.$0,b_,ca):cd!=null&&cd.$==0?Y.Map3Opt6(b9,cd.$0,b_,b$):(ce=Y.New({$:3,$0:[],$1:[]}),(Y.When(b_,cf,ce),Y.When(b$,cf,ce),Y.When(ca,cf,ce),ce));};Y.Sequence=function(b9){var b_,b$,ca;function cb(cc){var cd;if(ca[0]===0){cd=m.map(function(ce){var cf;cf=ce.s;return cf!=null&&cf.$==0?cf.$0:cf!=null&&cf.$==2?cf.$0:f.FailWith("value not found by View.Sequence");},b_);if(m.forall(function(ce){var cf;cf=ce.s;return cf!=null&&cf.$==0;},b_))Y.MarkForever(b$,cd);else Y.MarkReady(b$,cd);}else ca[0]=ca[0]-1;}b_=m.ofSeq(b9);return b_.length==0?Y.New({$:0,$0:[]}):(b$=Y.New({$:3,$0:[],$1:[]}),(ca=[m.length(b_)-1],(m.iter(function(cc){Y.When(cc,cb,b$);},b_),b$)));};Y.Map2=function(b9,b_,b$){var ca,cb,cc;function cd(ce){var cf,cg,ch;if(!(cf=cc.s,cf!=null&&cf.$==0||cf!=null&&cf.$==2)){cg=Y.ValueAndForever(b_);ch=Y.ValueAndForever(b$);if(cg!=null&&cg.$==1)ch!=null&&ch.$==1?cg.$0[1]&&ch.$0[1]?Y.MarkForever(cc,b9(cg.$0[0],ch.$0[0])):Y.MarkReady(cc,b9(cg.$0[0],ch.$0[0])):void 0;}}ca=b_.s;cb=b$.s;return ca!=null&&ca.$==0?cb!=null&&cb.$==0?Y.New({$:0,$0:b9(ca.$0,cb.$0)}):Y.Map2Opt1(b9,ca.$0,b$):cb!=null&&cb.$==0?Y.Map2Opt2(b9,cb.$0,b_):(cc=Y.New({$:3,$0:[],$1:[]}),(Y.When(b_,cd,cc),Y.When(b$,cd,cc),cc));};Y.Map2Unit=function(b9,b_){var b$,ca,cb;function cc(){var cd,ce,cf;if(!(cd=cb.s,cd!=null&&cd.$==0||cd!=null&&cd.$==2)){ce=Y.ValueAndForever(b9);cf=Y.ValueAndForever(b_);if(ce!=null&&ce.$==1)cf!=null&&cf.$==1?ce.$0[1]&&cf.$0[1]?Y.MarkForever(cb,null):Y.MarkReady(cb,null):void 0;}}b$=b9.s;ca=b_.s;return b$!=null&&b$.$==0?ca!=null&&ca.$==0?Y.New({$:0,$0:null}):b_:ca!=null&&ca.$==0?b9:(cb=Y.New({$:3,$0:[],$1:[]}),(Y.When(b9,cc,cb),Y.When(b_,cc,cb),cb));};Y.Copy=function(b9){var b_,b$,ca;b_=b9.s;return b_==null?b9:b_!=null&&b_.$==2?(b$=Y.New({$:2,$0:b_.$0,$1:[]}),(Y.WhenObsolete(b9,b$),b$)):b_!=null&&b_.$==3?(ca=Y.New({$:3,$0:[],$1:[]}),(Y.When(b9,function(cb){Y.MarkDone(ca,b9,cb);},ca),ca)):b9;};Y.WhenObsoleteRun=function(b9,b_){var b$;b$=b9.s;if(b$==null)b_();else b$!=null&&b$.$==2?b$.$1.push(b_):b$!=null&&b$.$==3?b$.$1.push(b_):void 0;};Y.When=function(b9,b_,b$){var ca;ca=b9.s;if(ca==null)Y.Obsolete(b$);else ca!=null&&ca.$==2?(Y.EnqueueSafe(ca.$1,b$),b_(ca.$0)):ca!=null&&ca.$==3?(ca.$0.push(b_),Y.EnqueueSafe(ca.$1,b$)):b_(ca.$0);};Y.MarkDone=function(b9,b_,b$){var ca;if(ca=b_.s,ca!=null&&ca.$==0)Y.MarkForever(b9,b$);else Y.MarkReady(b9,b$);};Y.Map3Opt1=function(b9,b_,b$,ca){return Y.Map(function(cb){return b9(b_,b$,cb);},ca);};Y.Map3Opt2=function(b9,b_,b$,ca){return Y.Map(function(cb){return b9(b_,cb,b$);},ca);};Y.Map3Opt3=function(b9,b_,b$,ca){return Y.Map2(function(cb,cc){return b9(b_,cb,cc);},b$,ca);};Y.Map3Opt4=function(b9,b_,b$,ca){return Y.Map(function(cb){return b9(cb,b_,b$);},ca);};Y.Map3Opt5=function(b9,b_,b$,ca){return Y.Map2(function(cb,cc){return b9(cb,b_,cc);},b$,ca);};Y.Map3Opt6=function(b9,b_,b$,ca){return Y.Map2(function(cb,cc){return b9(cb,cc,b_);},b$,ca);};Y.ValueAndForever=function(b9){var b_;b_=b9.s;return b_!=null&&b_.$==0?{$:1,$0:[b_.$0,true]}:b_!=null&&b_.$==2?{$:1,$0:[b_.$0,false]}:null;};Y.MarkForever=function(b9,b_){var b$,ca,cb,cc;b$=b9.s;if(b$!=null&&b$.$==3){b9.s={$:0,$0:b_};ca=b$.$0;for(cb=0,cc=m.length(ca)-1;cb<=cc;cb++)(m.get(ca,cb))(b_);}else void 0;};Y.MarkReady=function(b9,b_){var b$,ca,cb,cc;b$=b9.s;if(b$!=null&&b$.$==3){b9.s={$:2,$0:b_,$1:b$.$1};ca=b$.$0;for(cb=0,cc=m.length(ca)-1;cb<=cc;cb++)(m.get(ca,cb))(b_);}else void 0;};Y.Map2Opt1=function(b9,b_,b$){return Y.Map(function(ca){return b9(b_,ca);},b$);};Y.Map2Opt2=function(b9,b_,b$){return Y.Map(function(ca){return b9(ca,b_);},b$);};Y.WhenObsolete=function(b9,b_){var b$;b$=b9.s;if(b$==null)Y.Obsolete(b_);else b$!=null&&b$.$==2?Y.EnqueueSafe(b$.$1,b_):b$!=null&&b$.$==3?Y.EnqueueSafe(b$.$1,b_):void 0;};Y.EnqueueSafe=function(b9,b_){var b$,ca,cb,cc;b9.push(b_);if(b9.length%20===0){b$=b9.slice(0);b2.Clear(b9);for(ca=0,cb=m.length(b$)-1;ca<=cb;ca++){cc=m.get(b$,ca);if(typeof cc=="object")(function(cd){if(cd.s)b9.push(cd);}(cc));else(function(cd){b9.push(cd);}(cc));}}else void 0;};Z.notPresent=function(){throw new bK.New();};_0.Get=function(b9){return b9 instanceof a.Array?_0.ArrayEnumerator(b9):q.Equals(typeof b9,"string")?_0.StringEnumerator(b9):b9.GetEnumerator();};_0.ArrayEnumerator=function(b9){return new _1.New(0,null,function(b_){var b$;b$=b_.s;return b$<m.length(b9)&&(b_.c=m.get(b9,b$),b_.s=b$+1,true);},void 0);};_0.StringEnumerator=function(b9){return new _1.New(0,null,function(b_){var b$;b$=b_.s;return b$<b9.length&&(b_.c=b9[b$],b_.s=b$+1,true);},void 0);};_0.Get0=function(b9){return b9 instanceof a.Array?_0.ArrayEnumerator(b9):q.Equals(typeof b9,"string")?_0.StringEnumerator(b9):"GetEnumerator0"in b9?b9.GetEnumerator0():b9.GetEnumerator();};_1=_0.T=b5.Class({MoveNext:function(){var b9;b9=this.n(this);this.e=b9?1:2;return b9;},Current:function(){return this.e===1?this.c:this.e===0?f.FailWith("Enumeration has not started. Call MoveNext."):f.FailWith("Enumeration already finished.");},Dispose:function(){if(this.d)this.d(this);}},g,_1);_1.New=b5.Ctor(function(b9,b_,b$,ca){g.New.call(this);this.s=b9;this.c=b_;this.n=b$;this.d=ca;this.e=0;},_1);_2.$cctor=function(){_2.$cctor=a.ignore;_2.LoadedTemplates=new F.New$5();_2.LocalTemplatesLoaded=false;_2.GlobalHoles=new F.New$5();_2.TextHoleRE="\\${([^}]+)}";_2.RenderedFullDocTemplate=null;};_3.LinkElement=function(b9,b_){_3.InsertDoc(b9,b_,null);};_3.InsertDoc=function(b9,b_,b$){var ca,cb,cc;while(true)if(b_!=null&&b_.$==1)return _3.InsertNode(b9,b_.$0.El,b$);else if(b_!=null&&b_.$==2){ca=b_.$0;ca.Dirty=false;b_=ca.Current;}else if(b_==null)return b$;else if(b_!=null&&b_.$==4)return _3.InsertNode(b9,b_.$0.Text,b$);else if(b_!=null&&b_.$==5)return _3.InsertNode(b9,b_.$0,b$);else if(b_!=null&&b_.$==6)return m.foldBack(function(cd,ce){return(((b5.Curried3(function(cf,cg,ch){return cg==null||cg.constructor===L?_3.InsertDoc(cf,cg,ch):_3.InsertNode(cf,cg,ch);}))(b9))(cd))(ce);},b_.$0.Els,b$);else{cb=b_.$1;cc=b_.$0;b_=cc;b$=_3.InsertDoc(b9,cb,b$);}};_3.CreateRunState=function(b9,b_){return by.New(bz.get_Empty(),_3.CreateElemNode(b9,bi.EmptyAttr(),b_));};_3.PerformAnimatedUpdate=function(b9,b_,b$){var ca;return bd.get_UseAnimations()?(ca=null,bA.Delay(function(){var cb,cc,cd;cb=bz.FindAll(b$);cc=_3.ComputeChangeAnim(b_,cb);cd=_3.ComputeEnterAnim(b_,cb);return bA.Bind(bd.Play(bd.Append(cc,_3.ComputeExitAnim(b_,cb))),function(){return bA.Bind(_3.SyncElemNodesNextFrame(b9,b_),function(){return bA.Bind(bd.Play(cd),function(){b_.PreviousNodes=cb;return bA.Return(null);});});});})):_3.SyncElemNodesNextFrame(b9,b_);};_3.PerformSyncUpdate=function(b9,b_,b$){var ca;ca=bz.FindAll(b$);_3.SyncElemNode(b9,b_.Top);b_.PreviousNodes=ca;};_3.InsertBeforeDelim=function(b9,b_){var b$,ca;b$=b9.parentNode;ca=self.document.createTextNode("");b$.insertBefore(ca,b9);_3.LinkPrevElement(b9,b_);return ca;};_3.InsertNode=function(b9,b_,b$){bb.InsertAt(b9,b$,b_);return b_;};_3.CreateElemNode=function(b9,b_,b$){var ca;_3.LinkElement(b9,b$);ca=bi.Insert(b9,b_);return _4.New(ca,b$,null,b9,_7.Int(),b5.GetOptional(ca.OnAfterRender));};_3.SyncElemNodesNextFrame=function(b9,b_){function b$(ca){a.requestAnimationFrame(function(){_3.SyncElemNode(b9,b_.Top);ca();});}return be.BatchUpdatesEnabled()?bA.FromContinuations(function(ca,cb,cc){return b$.apply(null,[ca,cb,cc]);}):(_3.SyncElemNode(b9,b_.Top),bA.Return(null));};_3.ComputeExitAnim=function(b9,b_){return bd.Concat(m.map(function(b$){return bi.GetExitAnim(b$.Attr);},bz.ToArray(bz.Except(b_,bz.Filter(function(b$){return bi.HasExitAnim(b$.Attr);},b9.PreviousNodes)))));};_3.ComputeEnterAnim=function(b9,b_){return bd.Concat(m.map(function(b$){return bi.GetEnterAnim(b$.Attr);},bz.ToArray(bz.Except(b9.PreviousNodes,bz.Filter(function(b$){return bi.HasEnterAnim(b$.Attr);},b_)))));};_3.ComputeChangeAnim=function(b9,b_){var b$;function ca(cb){return bi.HasChangeAnim(cb.Attr);}b$=function(cb){return bz.Filter(ca,cb);};return bd.Concat(m.map(function(cb){return bi.GetChangeAnim(cb.Attr);},bz.ToArray(bz.Intersect(b$(b9.PreviousNodes),b$(b_)))));};_3.SyncElemNode=function(b9,b_){!b9?_3.SyncElement(b_):void 0;_3.Sync(b_.Children);_3.AfterRender(b_);};_3.CreateTextNode=function(){return{Text:self.document.createTextNode(""),Dirty:false,Value:""};};_3.UpdateTextNode=function(b9,b_){b9.Value=b_;b9.Dirty=true;};_3.LinkPrevElement=function(b9,b_){_3.InsertDoc(b9.parentNode,b_,b9);};_3.SyncElement=function(b9){function b_(b$){function ca(cb){var cc,cd,ce,cf;while(true){if(cb!=null&&cb.$==0){cd=cb.$1;ce=cb.$0;if(ca(ce))return true;else cb=cd;}else if(cb!=null&&cb.$==2){cf=cb.$0;if(cf.Dirty)return true;else cb=cf.Current;}else return cb!=null&&cb.$==6&&(cc=cb.$0,cc.Dirty||m.exists(b_,cc.Holes));}}return ca(b$.Children);}bi.Sync(b9.El,b9.Attr);if(b_(b9))_3.DoSyncElement(b9);};_3.Sync=function(b9){var b_,b$,ca,cb,cc;while(true){if(b9!=null&&b9.$==1)return _3.SyncElemNode(false,b9.$0);else if(b9!=null&&b9.$==2){ca=b9.$0;b9=ca.Current;}else if(b9==null)return null;else if(b9!=null&&b9.$==5)return null;else if(b9!=null&&b9.$==4){b_=b9.$0;return b_.Dirty?(b_.Text.nodeValue=b_.Value,b_.Dirty=false):null;}else if(b9!=null&&b9.$==6){b$=b9.$0;m.iter(function(cd){_3.SyncElemNode(false,cd);},b$.Holes);m.iter(function(cd){bi.Sync(cd[0],cd[1]);},b$.Attrs);return _3.AfterRender(b$);}else{cb=b9.$1;cc=b9.$0;_3.Sync(cc);b9=cb;}}};_3.AfterRender=function(b9){var b_;b_=b5.GetOptional(b9.Render);if(b_!=null&&b_.$==1){b_.$0(b9.El);b5.SetOptional(b9,"Render",null);}};_3.DoSyncElement=function(b9){var b_,b$,ca;function cb(cc,cd){var ce,cf,cg,ch;while(true){if(cc!=null&&cc.$==1)return cc.$0.El;else if(cc!=null&&cc.$==2){cf=cc.$0;if(cf.Dirty){cf.Dirty=false;return _3.InsertDoc(b_,cf.Current,cd);}else cc=cf.Current;}else if(cc==null)return cd;else if(cc!=null&&cc.$==4)return cc.$0.Text;else if(cc!=null&&cc.$==5)return cc.$0;else if(cc!=null&&cc.$==6){ce=cc.$0;ce.Dirty?ce.Dirty=false:void 0;return m.foldBack(function(ci,cj){return ci==null||ci.constructor===L?cb(ci,cj):ci;},ce.Els,cd);}else{cg=cc.$1;ch=cc.$0;cc=ch;cd=cb(cg,cd);}}}b_=b9.El;bW.Iter((b$=b9.El,function(cc){bb.RemoveNode(b$,cc);}),bW.Except(bW.DocChildren(b9),bW.Children(b9.El,b5.GetOptional(b9.Delimiters))));cb(b9.Children,(ca=b5.GetOptional(b9.Delimiters),ca!=null&&ca.$==1?ca.$0[1]:null));};_4=h.DocElemNode=b5.Class({Equals:function(b9){return this.ElKey===b9.ElKey;},GetHashCode:function(){return this.ElKey;}},null,_4);_4.New=function(b9,b_,b$,ca,cb,cc){var cd;return new _4((cd={Attr:b9,Children:b_,El:ca,ElKey:cb},(b5.SetOptional(cd,"Delimiters",b$),b5.SetOptional(cd,"Render",cc),cd)));};_7.Int=function(){_7.set_counter(_7.counter()+1);return _7.counter();};_7.set_counter=function(b9){bE.$cctor();bE.counter=b9;};_7.counter=function(){bE.$cctor();return bE.counter;};_9=h.Elt=b5.Class({},B,_9);_9.TreeNode=function(b9,b_){var b$,ca;function cb(cc,cd){return bi.Updates(cd);}b$=bv.Create(b_);return new _9.New$1({$:6,$0:b9},V.Map2Unit((ca=m.map(function(cc){return cb(cc[0],cc[1]);},b9.Attrs),bu.TreeReduce(V.Const(),V.Map2Unit,ca)),b$.v),m.get(b9.Els,0),b$);};_9.New$1=b5.Ctor(function(b9,b_,b$,ca){B.New.call(this,b9,b_);this.docNode$1=b9;this.updates$1=b_;this.elt=b$;this.rvUpdates=ca;},_9);V.Const=function(b9){var b_;b_=Y.New({$:0,$0:b9});return function(){return b_;};};V.Sink=function(b9,b_){function b$(){Y.WhenRun(b_(),b9,function(){bA.scheduler().Fork(b$);});}bA.scheduler().Fork(b$);};V.Map=function(b9,b_){return V.CreateLazy(function(){return Y.Map(b9,b_());});};V.Map3=function(b9,b_,b$,ca){return V.CreateLazy(function(){return Y.Map3(b9,b_(),b$(),ca());});};V.Sequence=function(b9){return V.CreateLazy(function(){return Y.Sequence(N.map(function(b_){return b_();},b9));});};V.Map2=function(b9,b_,b$){return V.CreateLazy(function(){return Y.Map2(b9,b_(),b$());});};V.Map2Unit=function(b9,b_){return V.CreateLazy(function(){return Y.Map2Unit(b9(),b_());});};V.CreateLazy=function(b9){var b_;b_={c:null,o:b9};return function(){var b$,ca;b$=b_.c;return b$===null?(b$=b_.o(),b_.c=b$,(ca=b$.s,ca!=null&&ca.$==0)?b_.o=null:Y.WhenObsoleteRun(b$,function(){b_.c=null;}),b$):b$;};};$.convertTextNode=function(b9){var b_,b$,ca,cb,cc,cd;b_=null;b$=0;cb=b9.textContent;cc=new a.RegExp(A.TextHoleRE(),"g");while(b_=cc.exec(cb),b_!==null){b9.parentNode.insertBefore(self.document.createTextNode(ba.string(cb,{$:1,$0:b$},{$:1,$0:cc.lastIndex-m.get(b_,0).length-1})),b9);b$=cc.lastIndex;cd=self.document.createElement("span");cd.setAttribute("ws-replace",m.get(b_,1).toLowerCase());b9.parentNode.insertBefore(cd,b9);}cc.lastIndex=0;b9.textContent=ba.string(cb,{$:1,$0:b$},null);};$.failNotLoaded=function(b9){b6.warn("Instantiating non-loaded template",b9);};$.fillTextHole=function(b9,b_,b$){var ca;ca=b9.querySelector("[ws-replace]");return q.Equals(ca,null)?(b6.warn("Filling non-existent text hole",b$),null):(ca.parentNode.replaceChild(self.document.createTextNode(b_),ca),{$:1,$0:ca.getAttribute("ws-replace")});};$.removeHolesExcept=function(b9,b_){function b$(ca){A.foreachNotPreserved(b9,"["+ca+"]",function(cb){if(!b_.Contains(cb.getAttribute(ca)))cb.removeAttribute(ca);});}b$("ws-attr");b$("ws-onafterrender");b$("ws-var");A.foreachNotPreserved(b9,"[ws-hole]",function(ca){if(!b_.Contains(ca.getAttribute("ws-hole"))){ca.removeAttribute("ws-hole");while(ca.hasChildNodes())ca.removeChild(ca.lastChild);}});A.foreachNotPreserved(b9,"[ws-replace]",function(ca){if(!b_.Contains(ca.getAttribute("ws-replace")))ca.parentNode.removeChild(ca);});A.foreachNotPreserved(b9,"[ws-on]",function(ca){ca.setAttribute("ws-on",bt.concat(" ",m.filter(function(cb){return b_.Contains(m.get(bt.SplitChars(cb,[":"],1),1));},bt.SplitChars(ca.getAttribute("ws-on"),[" "],1))));});A.foreachNotPreserved(b9,"[ws-attr-holes]",function(ca){var cb,cc,cd,ce,cf;cb=bt.SplitChars(ca.getAttribute("ws-attr-holes"),[" "],1);for(cc=0,cd=cb.length-1;cc<=cd;cc++){ce=m.get(cb,cc);ca.setAttribute(ce,(cf=new a.RegExp(A.TextHoleRE(),"g"),ca.getAttribute(ce).replace(cf,function(cg,ch){return b_.Contains(ch)?cg:"";})));}});};$.fillInstanceAttrs=function(b9,b_){var b$,ca,cb,cc,cd;$.convertAttrs(b_);b$=b_.nodeName.toLowerCase();ca=b9.querySelector("[ws-attr="+b$+"]");if(q.Equals(ca,null))b6.warn("Filling non-existent attr hole",b$);else{ca.removeAttribute("ws-attr");for(cb=0,cc=b_.attributes.length-1;cb<=cc;cb++){cd=b_.attributes.item(cb);if(cd.name=="class"&&ca.hasAttribute("class"))ca.setAttribute("class",ca.getAttribute("class")+" "+cd.nodeValue);else ca.setAttribute(cd.name,cd.nodeValue);}}};$.mapHoles=function(b9,b_){function b$(ca){A.foreachNotPreserved(b9,"["+ca+"]",function(cb){var cc,cd;cc=(cd=null,[b_.TryGetValue(cb.getAttribute(ca).toLowerCase(),{get:function(){return cd;},set:function(ce){cd=ce;}}),cd]);if(cc[0])cb.setAttribute(ca,cc[1]);});}b$("ws-hole");b$("ws-replace");b$("ws-attr");b$("ws-onafterrender");b$("ws-var");A.foreachNotPreserved(b9,"[ws-on]",function(ca){ca.setAttribute("ws-on",bt.concat(" ",m.map(function(cb){var cc,cd,ce;cc=bt.SplitChars(cb,[":"],1);cd=(ce=null,[b_.TryGetValue(m.get(cc,1),{get:function(){return ce;},set:function(cf){ce=cf;}}),ce]);return cd[0]?m.get(cc,0)+":"+cd[1]:cb;},bt.SplitChars(ca.getAttribute("ws-on"),[" "],1))));});A.foreachNotPreserved(b9,"[ws-attr-holes]",function(ca){var cb,cc,cd;cb=bt.SplitChars(ca.getAttribute("ws-attr-holes"),[" "],1);for(cc=0,cd=cb.length-1;cc<=cd;cc++)(function(){var ce;function cf(cg,ch){var ci;ci=f.KeyValue(ch);return cg.replace(new a.RegExp("\\${"+ci[0]+"}","ig"),"${"+ci[1]+"}");}ce=m.get(cb,cc);return ca.setAttribute(ce,(((b5.Curried3(N.fold))(cf))(ca.getAttribute(ce)))(b_));}());});};$.fill=function(b9,b_,b$){while(true)if(b9.hasChildNodes())b$=b_.insertBefore(b9.lastChild,b$);else return null;};$.convertAttrs=function(b9){var b$,ca,cb,cc,cd,ce,cf,cg;function b_(ch){var ci;ci=b9.getAttribute(ch);if(ci==null);else b9.setAttribute(ch,ci.toLowerCase());}b$=b9.attributes;ca=[];cb=[];cc=[];for(cd=0,ce=b$.length-1;cd<=ce;cd++){cf=b$.item(cd);if(bt.StartsWith(cf.nodeName,"ws-on")&&cf.nodeName!="ws-onafterrender"&&cf.nodeName!="ws-on"){ca.push(cf.nodeName);cb.push(ba.string(cf.nodeName,{$:1,$0:"ws-on".length},null)+":"+cf.nodeValue.toLowerCase());}else!bt.StartsWith(cf.nodeName,"ws-")&&(new a.RegExp(A.TextHoleRE())).test(cf.nodeValue)?(cf.nodeValue=(cg=new a.RegExp(A.TextHoleRE(),"g"),cf.nodeValue.replace(cg,function(ch,ci){return"${"+ci.toLowerCase()+"}";})),cc.push(cf.nodeName)):void 0;}if(!(cb.length==0))b9.setAttribute("ws-on",bt.concat(" ",cb));if(!(cc.length==0))b9.setAttribute("ws-attr-holes",bt.concat(" ",cc));b_("ws-hole");b_("ws-replace");b_("ws-attr");b_("ws-onafterrender");b_("ws-var");m.iter(function(ch){b9.removeAttribute(ch);},ca);};ba.string=function(b9,b_,b$){var ca,cb;return b_==null?b$!=null&&b$.$==1?(ca=b$.$0,ca<0?"":b9.slice(0,ca+1)):"":b$==null?b9.slice(b_.$0):(cb=b$.$0,cb<0?"":b9.slice(b_.$0,cb+1));};bb.ParseHTMLIntoFakeRoot=function(b9){var b_,b$,ca,cb,cc;function cd(ce,cf){var cg;while(true)if(cf===0)return ce;else{cg=cf;ce=ce.lastChild;cf=cg-1;}}b_=self.document.createElement("div");return!bb.rhtml().test(b9)?(b_.appendChild(self.document.createTextNode(b9)),b_):(b$=(ca=bb.rtagName().exec(b9),q.Equals(ca,null)?"":m.get(ca,1).toLowerCase()),(cb=(cc=(bb.wrapMap())[b$],cc?cc:bb.defaultWrap()),(b_.innerHTML=cb[1]+b9.replace(bb.rxhtmlTag(),"<$1></$2>")+cb[2],cd(b_,cb[0]))));};bb.ChildrenArray=function(b9){var b_,b$,ca;b_=[];for(b$=0,ca=b9.childNodes.length-1;b$<=ca;b$++)b_.push(b9.childNodes[b$]);return b_;};bb.rhtml=function(){bF.$cctor();return bF.rhtml;};bb.wrapMap=function(){bF.$cctor();return bF.wrapMap;};bb.defaultWrap=function(){bF.$cctor();return bF.defaultWrap;};bb.rxhtmlTag=function(){bF.$cctor();return bF.rxhtmlTag;};bb.rtagName=function(){bF.$cctor();return bF.rtagName;};bb.IterSelector=function(b9,b_,b$){var ca,cb,cc;ca=b9.querySelectorAll(b_);for(cb=0,cc=ca.length-1;cb<=cc;cb++)b$(ca[cb]);};bb.IterSelectorDoc=function(b9,b_){var b$,ca,cb;b$=self.document.querySelectorAll(b9);for(ca=0,cb=b$.length-1;ca<=cb;ca++)b_(b$[ca]);};bb.InsertAt=function(b9,b_,b$){var ca;if(!(b$.parentNode===b9&&b_===(ca=b$.nextSibling,q.Equals(ca,null)?null:ca)))b9.insertBefore(b$,b_);};bb.RemoveNode=function(b9,b_){if(b_.parentNode===b9)b9.removeChild(b_);};N.insufficient=function(){return f.FailWith("The input sequence has an insufficient number of elements.");};N.nonNegative=function(){return f.FailWith("The input must be non-negative.");};bc=E.KeyCollection=b5.Class({GetEnumerator:function(){return _0.Get(N.map(function(b9){return b9.K;},this.d));}},g,bc);bc.New=b5.Ctor(function(b9){g.New.call(this);this.d=b9;},bc);bd.get_UseAnimations=function(){return bB.UseAnimations();};bd.Play=function(b9){var b_;b_=null;return bA.Delay(function(){return bA.Bind(bd.Run(a.ignore,bB.Actions(b9)),function(){bB.Finalize(b9);return bA.Return(null);});});};bd.Append=function(b9,b_){return{$:0,$0:bH.Append(b9.$0,b_.$0)};};bd.Run=function(b9,b_){var b$;function ca(cb){function cc(cd){return function(ce){var cf;cf=ce-cd;b_.Compute(cf);b9();return cf<=b$?void a.requestAnimationFrame(function(cg){(cc(cd))(cg);}):cb();};}a.requestAnimationFrame(function(cd){(cc(cd))(cd);});}b$=b_.Duration;return b$===0?bA.Zero():bA.FromContinuations(function(cb,cc,cd){return ca.apply(null,[cb,cc,cd]);});};bd.Concat=function(b9){return{$:0,$0:bH.Concat(N.map(bB.List,b9))};};bd.get_Empty=function(){return{$:0,$0:bH.Empty()};};be.BatchUpdatesEnabled=function(){bC.$cctor();return bC.BatchUpdatesEnabled;};bf.StartProcessor=function(b9){var b_;function b$(){var ca;ca=null;return bA.Delay(function(){return bA.Bind(b9,function(){var cb;cb=b_[0];return q.Equals(cb,1)?(b_[0]=0,bA.Zero()):q.Equals(cb,2)?(b_[0]=1,b$()):bA.Zero();});});}b_=[0];return function(){var ca;ca=b_[0];if(q.Equals(ca,0)){b_[0]=1;bA.Start(b$(),null);}else q.Equals(ca,1)?b_[0]=2:void 0;};};bh.New=function(b9,b_,b$,ca){var cb;cb={DynElem:b9,DynFlags:b_,DynNodes:b$};b5.SetOptional(cb,"OnAfterRender",ca);return cb;};Y.Obsolete=function(b9){var b_,b$,ca,cb,cc;b$=b9.s;if(b$==null||(b$!=null&&b$.$==2?(b_=b$.$1,false):b$!=null&&b$.$==3?(b_=b$.$1,false):true))void 0;else{b9.s=null;for(ca=0,cb=m.length(b_)-1;ca<=cb;ca++){cc=m.get(b_,ca);if(typeof cc=="object")(function(cd){Y.Obsolete(cd);}(cc));else cc();}}};Y.New=function(b9){return{s:b9};};bi.Insert=function(b9,b_){var b$,ca,cb;function cc(cd){var ce,cf;while(true)if(!(cd===null)){if(cd!=null&&cd.$==1)return b$.push(cd.$0);else if(cd!=null&&cd.$==2){ce=cd.$1;cf=cd.$0;cc(cf);cd=ce;}else return cd!=null&&cd.$==3?cd.$0(b9):cd!=null&&cd.$==4?ca.push(cd.$0):null;}else return null;}b$=[];ca=[];cc(b_);cb=b$.slice(0);return bh.New(b9,bi.Flags(b_),cb,ca.length===0?null:{$:1,$0:function(cd){N.iter(function(ce){ce(cd);},ca);}});};bi.Updates=function(b9){return bu.MapTreeReduce(function(b_){return b_.NChanged();},V.Const(),V.Map2Unit,b9.DynNodes);};bi.Empty=function(b9){return bh.New(b9,0,[],null);};bi.Flags=function(b9){return b9!==null&&b9.hasOwnProperty("flags")?b9.flags:0;};bi.Static=function(b9){return new bo({$:3,$0:b9});};bi.Dynamic=function(b9,b_){return new bo({$:1,$0:new bI.New(b9,b_)});};bi.EmptyAttr=function(){bL.$cctor();return bL.EmptyAttr;};bi.HasExitAnim=function(b9){var b_;b_=2;return(b9.DynFlags&b_)===b_;};bi.GetExitAnim=function(b9){return bi.GetAnim(b9,function(b_,b$){return b_.NGetExitAnim(b$);});};bi.HasEnterAnim=function(b9){var b_;b_=1;return(b9.DynFlags&b_)===b_;};bi.GetEnterAnim=function(b9){return bi.GetAnim(b9,function(b_,b$){return b_.NGetEnterAnim(b$);});};bi.HasChangeAnim=function(b9){var b_;b_=4;return(b9.DynFlags&b_)===b_;};bi.GetChangeAnim=function(b9){return bi.GetAnim(b9,function(b_,b$){return b_.NGetChangeAnim(b$);});};bi.AppendTree=function(b9,b_){var b$;return b9===null?b_:b_===null?b9:(b$=new bo({$:2,$0:b9,$1:b_}),(bi.SetFlags(b$,bi.Flags(b9)|bi.Flags(b_)),b$));};bi.GetAnim=function(b9,b_){return bd.Concat(m.map(function(b$){return b_(b$,b9.DynElem);},b9.DynNodes));};bi.Sync=function(b9,b_){m.iter(function(b$){b$.NSync(b9);},b_.DynNodes);};bi.SetFlags=function(b9,b_){b9.flags=b_;};bj=t.Elt=b5.Class({get_Value:function(){return this.fillWith;},get_Name:function(){return this.name;}},s,bj);bk=t.Text=b5.Class({get_Value:function(){return this.fillWith;},get_Name:function(){return this.name;},get_AsChoiceView:function(){return{$:0,$0:this.fillWith};}},s,bk);bl=t.Attribute=b5.Class({get_Value:function(){return this.fillWith;},get_Name:function(){return this.name;}},s,bl);bm=t.Event=b5.Class({get_Value:function(){return this.fillWith;},get_Name:function(){return this.name;}},s,bm);bn.Handler=function(b9,b_){return bi.Static(function(b$){b$.addEventListener(b9,function(ca){return(b_(b$))(ca);},false);});};bn.OnAfterRender=function(b9){return new bo({$:4,$0:b9});};bn.Dynamic=function(b9,b_){return bi.Dynamic(b_,function(b$){return function(ca){return b$.setAttribute(b9,ca);};});};bn.Value=function(b9){return bn.ValueWith(bS.StringApply(),b9);};bn.FloatValueUnchecked=function(b9){return bn.ValueWith(bS.FloatApplyUnchecked(),b9);};bn.Checked=function(b9){return bn.ValueWith(bS.BoolCheckedApply(),b9);};bn.DateTimeValue=function(b9){return bn.ValueWith(bS.DateTimeApplyUnchecked(),b9);};bn.FileValue=function(b9){return bn.ValueWith(bS.FileApplyUnchecked(),b9);};bn.ValueWith=function(b9,b_){var b$;b$=b9(b_);return bo.Append(bi.Static(b$[0]),bn.DynamicCustom(b$[1],b$[2]));};bn.DynamicCustom=function(b9,b_){return bi.Dynamic(b_,b9);};bo=h.AttrProxy=b5.Class({},null,bo);bo.Handler=function(b9,b_){return bo.HandlerImpl(b9,b_);};bo.Concat=function(b9){var b_;b_=bu.ofSeqNonCopying(b9);return bu.TreeReduce(bi.EmptyAttr(),bo.Append,b_);};bo.Create=function(b9,b_){return bi.Static(function(b$){b$.setAttribute(b9,b_);});};bo.HandlerImpl=function(b9,b_){return bi.Static(function(b$){b$.addEventListener(b9,function(ca){return(b_(b$))(ca);},false);});};bo.Append=function(b9,b_){return bi.AppendTree(b9,b_);};bp=t.AfterRender=b5.Class({get_Value:function(){return this.fillWith;},get_Name:function(){return this.name;}},s,bp);bq=t.AfterRenderQ=b5.Class({get_Value:function(){return this.fillWith;},get_Name:function(){return this.name;}},s,bq);bs=br.T=b5.Class({GetEnumerator:function(){return new _1.New(this,null,function(b9){var b_;b_=b9.s;return b_.$==0?false:(b9.c=b_.$0,b9.s=b_.$1,true);},void 0);}},null,bs);bs.Empty=new bs({$:0});bt.concat=function(b9,b_){return m.ofSeq(b_).join(b9);};bt.SplitChars=function(b9,b_,b$){return bt.Split(b9,new a.RegExp("["+bt.RegexEscape(b_.join(""))+"]"),b$);};bt.StartsWith=function(b9,b_){return b9.substring(0,b_.length)==b_;};bt.Split=function(b9,b_,b$){return b$===1?m.filter(function(ca){return ca!=="";},bt.SplitWith(b9,b_)):bt.SplitWith(b9,b_);};bt.RegexEscape=function(b9){return b9.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};bt.SplitWith=function(b9,b_){return b9.split(b_);};bt.forall=function(b9,b_){return N.forall(b9,bt.protect(b_));};bt.protect=function(b9){return b9==null?"":b9;};bu.TreeReduce=function(b9,b_,b$){var ca;function cb(cc){return function(cd){var ce,cf;switch(cd<=0?0:cd===1?cc>=0&&cc<ca?1:(ce=cd,2):(ce=cd,2)){case 0:return b9;case 1:return m.get(b$,cc);case 2:cf=cd/2>>0;return b_((cb(cc))(cf),(cb(cc+cf))(cd-cf));}};}ca=m.length(b$);return(cb(0))(ca);};bu.MapTreeReduce=function(b9,b_,b$,ca){var cb;function cc(cd){return function(ce){var cf,cg;switch(ce<=0?0:ce===1?cd>=0&&cd<cb?1:(cf=ce,2):(cf=ce,2)){case 0:return b_;case 1:return b9(m.get(ca,cd));case 2:cg=ce/2>>0;return b$((cc(cd))(cg),(cc(cd+cg))(ce-cg));}};}cb=m.length(ca);return(cc(0))(cb);};bu.ofSeqNonCopying=function(b9){var b_,b$;if(b9 instanceof a.Array)return b9;else if(b9 instanceof bs)return m.ofList(b9);else if(b9===null)return[];else{b_=[];b$=_0.Get(b9);try{while(b$.MoveNext())b_.push(b$.Current());return b_;}finally{if(typeof b$=="object"&&"Dispose"in b$)b$.Dispose();}}};bv=h.Updates=b5.Class({},null,bv);bv.Create=function(b9){var b_;b_=null;b_=bv.New(b9,null,function(){var b$;b$=b_.s;return b$===null?(b$=Y.Copy(b_.c()),b_.s=b$,Y.WhenObsoleteRun(b$,function(){b_.s=null;}),b$):b$;});return b_;};bv.New=function(b9,b_,b$){return new bv({c:b9,s:b_,v:b$});};bw=E.ValueCollection=b5.Class({GetEnumerator:function(){return _0.Get(N.map(function(b9){return b9.V;},this.d));}},g,bw);bw.New=b5.Ctor(function(b9){g.New.call(this);this.d=b9;},bw);by.New=function(b9,b_){return{PreviousNodes:b9,Top:b_};};bz.get_Empty=function(){return{$:0,$0:new M.New$3()};};bz.FindAll=function(b9){var b_;function b$(cc,cd){var ce,cf,cg,ch,ci;while(true)switch(cc){case 0:if(cd!=null&&cd.$==0){cf=cd.$1;cg=cd.$0;b$(0,cg);cd=cf;}else if(cd!=null&&cd.$==1){ch=cd.$0;cd=ch;cc=1;}else if(cd!=null&&cd.$==2){ci=cd.$0;cd=ci.Current;}else return cd!=null&&cd.$==6?(ce=cd.$0.Holes,(function(cj){return function(ck){m.iter(cj,ck);};}(cb))(ce)):null;break;case 1:b_.push(cd);cd=cd.Children;cc=0;break;}}function ca(cc){return b$(0,cc);}function cb(cc){return b$(1,cc);}b_=[];ca(b9);return{$:0,$0:new M.New$2(b_)};};bz.Filter=function(b9,b_){return{$:0,$0:bR.Filter(b9,b_.$0)};};bz.Except=function(b9,b_){return{$:0,$0:bR.Except(b9.$0,b_.$0)};};bz.ToArray=function(b9){return bR.ToArray(b9.$0);};bz.Intersect=function(b9,b_){return{$:0,$0:bR.Intersect(b9.$0,b_.$0)};};bA.Delay=function(b9){return function(b_){try{(b9(null))(b_);}catch(b$){b_.k({$:1,$0:b$});}};};bA.Bind=function(b9,b_){return bA.checkCancel(function(b$){b9(bO.New(function(ca){var cb;if(ca.$==0){cb=ca.$0;bA.scheduler().Fork(function(){try{(b_(cb))(b$);}catch(cc){b$.k({$:1,$0:cc});}});}else bA.scheduler().Fork(function(){b$.k(ca);});},b$.ct));});};bA.Zero=function(){bP.$cctor();return bP.Zero;};bA.Start=function(b9,b_){var b$,ca;b$=(ca=(bA.defCTS())[0],b_==null?ca:b_.$0);bA.scheduler().Fork(function(){if(!b$.c)b9(bO.New(function(cb){if(cb.$==1)bA.UncaughtAsyncError(cb.$0);},b$));});};bA.Return=function(b9){return function(b_){b_.k({$:0,$0:b9});};};bA.scheduler=function(){bP.$cctor();return bP.scheduler;};bA.checkCancel=function(b9){return function(b_){if(b_.ct.c)bA.cancel(b_);else b9(b_);};};bA.defCTS=function(){bP.$cctor();return bP.defCTS;};bA.UncaughtAsyncError=function(b9){b6.log("WebSharper: Uncaught asynchronous exception",b9);};bA.FromContinuations=function(b9){return function(b_){var b$;function ca(cb){if(b$[0])f.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{b$[0]=true;bA.scheduler().Fork(cb);}}b$=[false];b9(function(cb){ca(function(){b_.k({$:0,$0:cb});});},function(cb){ca(function(){b_.k({$:1,$0:cb});});},function(cb){ca(function(){b_.k({$:2,$0:cb});});});};};bA.cancel=function(b9){b9.k({$:2,$0:new bZ.New(b9.ct)});};bB.UseAnimations=function(){bG.$cctor();return bG.UseAnimations;};bB.Actions=function(b9){return bB.ConcatActions(m.choose(function(b_){return b_.$==1?{$:1,$0:b_.$0}:null;},bH.ToArray(b9.$0)));};bB.Finalize=function(b9){m.iter(function(b_){if(b_.$==0)b_.$0();},bH.ToArray(b9.$0));};bB.ConcatActions=function(b9){var b_,b$,ca,cb;b_=bu.ofSeqNonCopying(b9);b$=m.length(b_);return b$===0?bB.Const():b$===1?m.get(b_,0):(ca=N.max(N.map(function(cc){return cc.Duration;},b_)),(cb=m.map(function(cc){return bB.Prolong(ca,cc);},b_),bB.Def(ca,function(cc){m.iter(function(cd){cd.Compute(cc);},cb);})));};bB.List=function(b9){return b9.$0;};bB.Const=function(b9){return bB.Def(0,function(){return b9;});};bB.Def=function(b9,b_){return{Compute:b_,Duration:b9};};bB.Prolong=function(b9,b_){var b$,ca,cb;b$=b_.Compute;ca=b_.Duration;cb=b0.Create(function(){return b_.Compute(b_.Duration);});return{Compute:function(cc){return cc>=ca?cb.f():b$(cc);},Duration:b9};};bC.$cctor=function(){bC.$cctor=a.ignore;bC.BatchUpdatesEnabled=true;};bD.concat=function(b9){var b_,b$;b_=[];for(var ca in b9)b_.push.apply(b_,b9[ca]);return b_;};bE.$cctor=function(){bE.$cctor=a.ignore;bE.counter=0;};bF.$cctor=function(){var b9;bF.$cctor=a.ignore;bF.rxhtmlTag=new a.RegExp("<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>","gi");bF.rtagName=new a.RegExp("<([\\w:]+)");bF.rhtml=new a.RegExp("<|&#?\\w+;");bF.wrapMap=(b9=[1,"<table>","</table>"],{option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:b9,tbody:b9,tfoot:b9,tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><colgroup>","</colgoup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"]});bF.defaultWrap=[0,"",""];};bG.$cctor=function(){bG.$cctor=a.ignore;bG.CubicInOut=bN.Custom(function(b9){var b_;b_=b9*b9;return 3*b_-2*(b_*b9);});bG.UseAnimations=true;};bH.Append=function(b9,b_){return b9.$==0?b_:b_.$==0?b9:{$:2,$0:b9,$1:b_};};bH.ToArray=function(b9){var b_;function b$(ca){var cb,cc;while(true)if(ca.$==1)return b_.push(ca.$0);else if(ca.$==2){cb=ca.$1;cc=ca.$0;b$(cc);ca=cb;}else return ca.$==3?m.iter(function(cd){b_.push(cd);},ca.$0):null;}b_=[];b$(b9);return b_.slice(0);};bH.Concat=function(b9){var b_;b_=bu.ofSeqNonCopying(b9);return bu.TreeReduce(bH.Empty(),bH.Append,b_);};bH.Empty=function(){b1.$cctor();return b1.Empty;};bI=h.DynamicAttrNode=b5.Class({NChanged:function(){return this.updates;},NGetExitAnim:function(b9){return bd.get_Empty();},NGetEnterAnim:function(b9){return bd.get_Empty();},NGetChangeAnim:function(b9){return bd.get_Empty();},NSync:function(b9){if(this.dirty){(this.push(b9))(this.value);this.dirty=false;}}},g,bI);bI.New=b5.Ctor(function(b9,b_){var b$;b$=this;g.New.call(this);this.push=b_;this.value=void 0;this.dirty=false;this.updates=V.Map(function(ca){b$.value=ca;b$.dirty=true;},b9);},bI);bK=b.KeyNotFoundException=b5.Class({},bJ,bK);bK.New=b5.Ctor(function(){bK.New$1.call(this,"The given key was not present in the dictionary.");},bK);bK.New$1=b5.Ctor(function(b9){this.message=b9;L.setPrototypeOf(this,bK.prototype);},bK);bL.$cctor=function(){var b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck;bL.$cctor=a.ignore;bL.EmptyAttr=null;bL.BoolCheckedApply=function(cl){function cm(cn,co){return co!=null&&co.$==1?void(cn.checked=co.$0):null;}return[function(cn){cn.addEventListener("change",function(){return cl.Get()!=cn.checked?cl.Set(cn.checked):null;});},function(cn){return function(co){return cm(cn,co);};},V.Map(function(cn){return{$:1,$0:cn};},cl.get_View())];};bL.StringSet=function(cl){return function(cm){cl.value=cm;};};bL.StringGet=function(cl){return{$:1,$0:cl.value};};bL.StringApply=(b9=bS.StringGet(),(b_=bS.StringSet(),function(cl){return bS.ApplyValue(b9,b_,cl);}));bL.DateTimeSetUnchecked=function(cl){return function(cm){cl.value=(new a.Date(cm)).toLocaleString();};};bL.DateTimeGetUnchecked=function(cl){var cm,cn,co,cp;cm=cl.value;return bT.isBlank(cm)?{$:1,$0:-8640000000000000}:(cn=(co=0,[(cp=bY.TryParse(cm),cp!=null&&cp.$==1&&(co=cp.$0,true)),co]),cn[0]?{$:1,$0:cn[1]}:null);};bL.DateTimeApplyUnchecked=(b$=bS.DateTimeGetUnchecked(),(ca=bS.DateTimeSetUnchecked(),function(cl){return bS.ApplyValue(b$,ca,cl);}));bL.FileSetUnchecked=function(){return function(){return null;};};bL.FileGetUnchecked=function(cl){var cm;cm=cl.files;return{$:1,$0:m.ofSeq(N.delay(function(){return N.map(function(cn){return cm.item(cn);},f.range(0,cm.length-1));}))};};bL.FileApplyUnchecked=(cb=bS.FileGetUnchecked(),(cc=bS.FileSetUnchecked(),function(cl){return bS.FileApplyValue(cb,cc,cl);}));bL.IntSetUnchecked=function(cl){return function(cm){cl.value=a.String(cm);};};bL.IntGetUnchecked=function(cl){var cm,cn;cm=cl.value;return bT.isBlank(cm)?{$:1,$0:0}:(cn=+cm,cn!==cn>>0?null:{$:1,$0:cn});};bL.IntApplyUnchecked=(cd=bS.IntGetUnchecked(),(ce=bS.IntSetUnchecked(),function(cl){return bS.ApplyValue(cd,ce,cl);}));bL.IntSetChecked=function(cl){return function(cm){var cn;cn=cm.get_Input();return cl.value!=cn?void(cl.value=cn):null;};};bL.IntGetChecked=function(cl){var cm,cn,co;cm=cl.value;return{$:1,$0:bT.isBlank(cm)?(cl.checkValidity?cl.checkValidity():true)?new bU({$:2,$0:cm}):new bU({$:1,$0:cm}):(cn=(co=0,[W.TryParseInt32(cm,{get:function(){return co;},set:function(cp){co=cp;}}),co]),cn[0]?new bU({$:0,$0:cn[1],$1:cm}):new bU({$:1,$0:cm}))};};bL.IntApplyChecked=(cf=bS.IntGetChecked(),(cg=bS.IntSetChecked(),function(cl){return bS.ApplyValue(cf,cg,cl);}));bL.FloatSetUnchecked=function(cl){return function(cm){cl.value=a.String(cm);};};bL.FloatGetUnchecked=function(cl){var cm,cn;cm=cl.value;return bT.isBlank(cm)?{$:1,$0:0}:(cn=+cm,a.isNaN(cn)?null:{$:1,$0:cn});};bL.FloatApplyUnchecked=(ch=bS.FloatGetUnchecked(),(ci=bS.FloatSetUnchecked(),function(cl){return bS.ApplyValue(ch,ci,cl);}));bL.FloatSetChecked=function(cl){return function(cm){var cn;cn=cm.get_Input();return cl.value!=cn?void(cl.value=cn):null;};};bL.FloatGetChecked=function(cl){var cm,cn;cm=cl.value;return{$:1,$0:bT.isBlank(cm)?(cl.checkValidity?cl.checkValidity():true)?new bU({$:2,$0:cm}):new bU({$:1,$0:cm}):(cn=+cm,a.isNaN(cn)?new bU({$:1,$0:cm}):new bU({$:0,$0:cn,$1:cm}))};};bL.FloatApplyChecked=(cj=bS.FloatGetChecked(),(ck=bS.FloatSetChecked(),function(cl){return bS.ApplyValue(cj,ck,cl);}));};bM=bA.Scheduler=b5.Class({Fork:function(b9){var b_;b_=this;this.robin.push(b9);if(this.idle){this.idle=false;a.setTimeout(function(){b_.tick();},0);}},tick:function(){var b9,b_,b$;b_=this;b$=b8.now();b9=true;while(b9)if(this.robin.length===0){this.idle=true;b9=false;}else{(this.robin.shift())();b8.now()-b$>40?(a.setTimeout(function(){b_.tick();},0),b9=false):void 0;}}},g,bM);bM.New=b5.Ctor(function(){g.New.call(this);this.idle=true;this.robin=[];},bM);bN=h.Easing=b5.Class({},g,bN);bN.Custom=function(b9){return new bN.New(b9);};bN.New=b5.Ctor(function(b9){g.New.call(this);this.transformTime=b9;},bN);bO.New=function(b9,b_){return{k:b9,ct:b_};};bP.$cctor=function(){bP.$cctor=a.ignore;bP.noneCT=bQ.New(false,[]);bP.scheduler=new bM.New();bP.defCTS=[new bV.New()];bP.Zero=bA.Return();bP.GetCT=function(b9){b9.k({$:0,$0:b9.ct});};};bQ.New=function(b9,b_){return{c:b9,r:b_};};bR.Filter=function(b9,b_){return new M.New$2(m.filter(b9,bR.ToArray(b_)));};bR.Except=function(b9,b_){var b$;b$=new M.New$2(bR.ToArray(b_));b$.ExceptWith(bR.ToArray(b9));return b$;};bR.ToArray=function(b9){var b_;b_=m.create(b9.Count(),void 0);b9.CopyTo(b_,0);return b_;};bR.Intersect=function(b9,b_){var b$;b$=new M.New$2(bR.ToArray(b9));b$.IntersectWith(bR.ToArray(b_));return b$;};br.head=function(b9){return b9.$==1?b9.$0:br.listEmpty();};br.tail=function(b9){return b9.$==1?b9.$1:br.listEmpty();};br.listEmpty=function(){return f.FailWith("The input list was empty.");};bS.ApplyValue=function(b9,b_,b$){var ca;function cb(cc,cd){return cd==null?null:cc(cd.$0);}ca=null;return[function(cc){function cd(){b$.UpdateMaybe(function(ce){var cf;ca=b9(cc);return ca!=null&&ca.$==1&&(!q.Equals(ca.$0,ce)&&(cf=[ca,ca.$0],true))?cf[0]:null;});}cc.addEventListener("change",cd);cc.addEventListener("input",cd);cc.addEventListener("keypress",cd);},function(cc){var cd;cd=b_(cc);return function(ce){return cb(cd,ce);};},V.Map(function(cc){var cd;return ca!=null&&ca.$==1&&(q.Equals(ca.$0,cc)&&(cd=ca.$0,true))?null:{$:1,$0:cc};},b$.get_View())];};bS.StringSet=function(){bL.$cctor();return bL.StringSet;};bS.StringGet=function(){bL.$cctor();return bL.StringGet;};bS.DateTimeSetUnchecked=function(){bL.$cctor();return bL.DateTimeSetUnchecked;};bS.DateTimeGetUnchecked=function(){bL.$cctor();return bL.DateTimeGetUnchecked;};bS.FileApplyValue=function(b9,b_,b$){var ca;function cb(cc,cd){return cd==null?null:cc(cd.$0);}ca=null;return[function(cc){cc.addEventListener("change",function(){b$.UpdateMaybe(function(cd){var ce;ca=b9(cc);return ca!=null&&ca.$==1&&(ca.$0!==cd&&(ce=[ca,ca.$0],true))?ce[0]:null;});});},function(cc){var cd;cd=b_(cc);return function(ce){return cb(cd,ce);};},V.Map(function(cc){var cd;return ca!=null&&ca.$==1&&(q.Equals(ca.$0,cc)&&(cd=ca.$0,true))?null:{$:1,$0:cc};},b$.get_View())];};bS.FileSetUnchecked=function(){bL.$cctor();return bL.FileSetUnchecked;};bS.FileGetUnchecked=function(){bL.$cctor();return bL.FileGetUnchecked;};bS.IntSetUnchecked=function(){bL.$cctor();return bL.IntSetUnchecked;};bS.IntGetUnchecked=function(){bL.$cctor();return bL.IntGetUnchecked;};bS.IntSetChecked=function(){bL.$cctor();return bL.IntSetChecked;};bS.IntGetChecked=function(){bL.$cctor();return bL.IntGetChecked;};bS.FloatSetUnchecked=function(){bL.$cctor();return bL.FloatSetUnchecked;};bS.FloatGetUnchecked=function(){bL.$cctor();return bL.FloatGetUnchecked;};bS.FloatSetChecked=function(){bL.$cctor();return bL.FloatSetChecked;};bS.FloatGetChecked=function(){bL.$cctor();return bL.FloatGetChecked;};bS.StringApply=function(){bL.$cctor();return bL.StringApply;};bS.FloatApplyUnchecked=function(){bL.$cctor();return bL.FloatApplyUnchecked;};bS.BoolCheckedApply=function(){bL.$cctor();return bL.BoolCheckedApply;};bS.DateTimeApplyUnchecked=function(){bL.$cctor();return bL.DateTimeApplyUnchecked;};bS.FileApplyUnchecked=function(){bL.$cctor();return bL.FileApplyUnchecked;};bT.isBlank=function(b9){return bt.forall(bX.IsWhiteSpace,b9);};bU=h.CheckedInput=b5.Class({get_Input:function(){return this.$==1?this.$0:this.$==2?this.$0:this.$1;}},null,bU);bV=b.CancellationTokenSource=b5.Class({},g,bV);bV.New=b5.Ctor(function(){g.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},bV);bW.Children=function(b9,b_){var b$,ca,cb;if(b_!=null&&b_.$==1){cb=[];b$=b_.$0[0].nextSibling;while(b$!==b_.$0[1]){cb.push(b$);b$=b$.nextSibling;}return{$:0,$0:cb};}else return{$:0,$0:m.init(b9.childNodes.length,(ca=b9.childNodes,function(cc){return ca[cc];}))};};bW.Except=function(b9,b_){var b$;b$=b9.$0;return{$:0,$0:m.filter(function(ca){return m.forall(function(cb){return!(ca===cb);},b$);},b_.$0)};};bW.Iter=function(b9,b_){m.iter(b9,b_.$0);};bW.DocChildren=function(b9){var b_;function b$(ca){var cb,cc,cd,ce;while(true){if(ca!=null&&ca.$==2){cc=ca.$0;ca=cc.Current;}else if(ca!=null&&ca.$==1)return b_.push(ca.$0.El);else if(ca==null)return null;else if(ca!=null&&ca.$==5)return b_.push(ca.$0);else if(ca!=null&&ca.$==4)return b_.push(ca.$0.Text);else if(ca!=null&&ca.$==6){cb=ca.$0.Els;return(function(cf){return function(cg){m.iter(cf,cg);};}(function(cf){if(cf==null||cf.constructor===L)b$(cf);else b_.push(cf);}))(cb);}else{cd=ca.$1;ce=ca.$0;b$(ce);ca=cd;}}}b_=[];b$(b9.Children);return{$:0,$0:bu.ofSeqNonCopying(b_)};};bX.IsWhiteSpace=function(b9){return b9.match(new a.RegExp("\\s"))!==null;};bY.TryParse=function(b9){var b_;b_=b8.parse(b9);return a.isNaN(b_)?null:{$:1,$0:b_};};W.TryParse=function(b9,b_,b$,ca){var cb,cc;cb=+b9;cc=cb===cb-cb%1&&cb>=b_&&cb<=b$;if(cc)ca.set(cb);return cc;};bZ=b.OperationCanceledException=b5.Class({},bJ,bZ);bZ.New=b5.Ctor(function(b9){bZ.New$1.call(this,"The operation was canceled.",null,b9);},bZ);bZ.New$1=b5.Ctor(function(b9,b_,b$){this.message=b9;this.inner=b_;L.setPrototypeOf(this,bZ.prototype);this.ct=b$;},bZ);b0.Create=function(b9){return b4.New(false,b9,b0.forceLazy);};b0.forceLazy=function(){var b9;b9=this.v();this.c=true;this.v=b9;this.f=b0.cachedLazy;return b9;};b0.cachedLazy=function(){return this.v;};b1.$cctor=function(){b1.$cctor=a.ignore;b1.Empty={$:0};};b2.Clear=function(b9){b9.splice(0,m.length(b9));};b4.New=function(b9,b_,b$){return{c:b9,v:b_,f:b$};};b5.OnLoad(function(){e.Main();});}(self));


if (typeof WebSharper !=='undefined') {
  WebSharper.Runtime.ScriptBasePath = '/Content/';
  WebSharper.Runtime.Start();
}
